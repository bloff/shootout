"* The Computer Language Shootout
    http://shootout.alioth.debian.org/
    contributed by Isaac Gouy
    modified by Eliot Miranda *"!

'From Squeak3.9 of 7 November 2006 [latest update: #7067] on 12 April 2007 at 9:45:01 pm'!
Object subclass: #Tests	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Shootout'!!Float methodsFor: 'printing' stamp: '  4/12/2007 21:42'!printOn: aStream withName: aString   aStream  nextPutAll: (self asStringWithDecimalPlaces: 9);      nextPut: Character tab; nextPutAll: aString; nextPut: Character lf.! !!Float methodsFor: 'platform' stamp: '  4/13/2007 14:47'!asStringWithDecimalPlaces: anInteger   | precision rounded |   anInteger <= 0 ifTrue: [^ self rounded printString].   precision _ Utilities floatPrecisionForDecimalPlaces: anInteger.   rounded _ self roundTo: precision.   ^(rounded asScaledDecimal: anInteger) printString copyUpTo: $s! !!Tests class methodsFor: 'benchmarking' stamp: '  4/12/2007 21:40'!partialsums: n to: output   | a1 a2 a3 a4 a5 a6 a7 a8 a9 twothirds alt |   a1 := a2 := a3 := a4 := a5 := a6 := a7 := a8 := a9 := 0.0d0.   twothirds := 2.0d0/3.0d0.   alt := -1.0d0.   1.0d0 to: n do: [:k| | k2 k3 sk ck |      k2 := k*k.      k3 := k2*k.      sk := k sin.      ck := k cos.      alt := -1.0d0 * alt.      a1 := a1 + (twothirds raisedTo: k - 1.0d0).      a2 := a2 + (k raisedTo: -0.5d0).      a3 := a3 + (1.0d0/(k*(k+1.0d0))).      a4 := a4 + (1.0d0/(k3*sk*sk)).      a5 := a5 + (1.0d0/(k3*ck*ck)).      a6 := a6 + (1.0d0/k).      a7 := a7 + (1.0d0/k2).      a8 := a8 + (alt/k).      a9 := a9 + (alt/(2.0d0*k - 1.0d0))].   a1 printOn: output withName: '(2/3)^k'.   a2 printOn: output withName: 'k^-0.5'.   a3 printOn: output withName: '1/k(k+1)'.   a4 printOn: output withName: 'Flint Hills'.   a5 printOn: output withName: 'Cookson Hills'.   a6 printOn: output withName: 'Harmonic'.   a7 printOn: output withName: 'Riemann Zeta'.   a8 printOn: output withName: 'Alternating Harmonic'.   a9 printOn: output withName: 'Gregory'.   ^''! !!Tests class methodsFor: 'platform' stamp: '  4/12/2007 18:57'!arg   ^(SmalltalkImage current getSystemAttribute: 3) asInteger! !!Tests class methodsFor: 'platform' stamp: '  4/13/2007 07:30'!postscript   SmalltalkImage current snapshot: false andQuit: true.   ^''! !!Tests class methodsFor: 'platform' stamp: '  4/12/2007 18:57'!stdout   ^UnixProcess stdOut! !!Tests class methodsFor: 'benchmark scripts' stamp: '  4/12/2007 21:44'!partialsums   self partialsums: self arg asFloatD to: self stdout.   ^self postscript! !
