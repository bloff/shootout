%%% -*- mode: erlang -*-
%%% $Id: reversefile.hipe,v 1.2 2004-06-14 07:07:11 bfulgham Exp $
%%% http://www.bagley.org/~doug/shootout/

-module(reversefile).
-export([main/0, main/1]).

main() -> main(['1']).
main(Args) ->
    Port = open_port({fd, 0, 1}, [eof, {line, 128}]),
    read_and_print(Port),
    halt(0).

read_and_print(Port) ->
    receive
	{Port, {_, {_, Line}}} ->
	    read_and_print(Port),
	    io:fwrite([Line, $\n]);
	{Port, eof} ->
	    ok
    end.
