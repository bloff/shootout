"*  The Computer Language Shootout
   http://shootout.alioth.debian.org/
   contributed by Paolo Bonzini *"!

!Tests class methodsFor: 'benchmarking' stamp: '  11/29/2006 23:37'!mandelbrot   | width height m bits s zr zi cr ci i tr stepr stepi |   width := (SmalltalkImage current getSystemAttribute: 3) asInteger.   height := width.   m := 50.   s := UnixProcess stdOut.   s nextPutAll: 'P4'; nextPut: Character lf;       nextPutAll: width printString, ' ', height printString;       nextPut: Character lf.   stepr := 2.0 / width.   stepi := 2.0 / height.   0 to: height - 1 do: [ :y |      bits := 0.      ci := stepi * y asFloat - 1.0.      0 to: width - 1 do: [ :x |         cr := stepr * x asFloat - 1.5.         zr := cr. zi := ci.         bits := bits bitShift: 1.         i := 1.         [            tr := (zr*zr) - (zi*zi) + cr.            zi := 2.0 * zr * zi + ci.            zr := tr.            (zr*zr) + (zi*zi) < 4.0 and: [ (i := i + 1) < m ]         ] whileTrue.         i = m ifTrue: [ bits := bits + 1 ].         (x bitAnd: 7) == 7 ifTrue: [            s nextPut: (Character value: bits).            bits := 0.         ]      ].      (width bitAnd: 7) == 0 ifFalse: [         bits := bits bitShift: 8 - (width bitAnd: 7).         s nextPut: (Character value: bits).      ]]! !
