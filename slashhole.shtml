<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head><title>The Slash Hole</title></head>
<body bgcolor="#ffffff">

<h2>The Slash Hole</h2>
<hr size="5" noshade>

<h3>&quot;Slashdot.  It's not my bag, baby.&quot;</h3>
(or: <i>Natalie Portman ate my grits, and Slashdot ate my bandwidth</i>).
<p>
 July 3, 2001
<p>
 My server at the bagley.org data center (my front closet) runs on a
 metered ADSL connection.  Every day it handles the few thousand
 requests I get just fine.  It can actually handle a pretty high load,
 but unfortunately, my ADSL connection can't; certainly not the
 <i><b>
 <a href="http://slashdot.org/articles/99/10/20/1342208.shtml">
 Dreaded Slashdot Effect</a>
</b></i>.
<p>
 It was Tuesday afternoon and I was lucky that Slashdot was experiencing
 one of their network problems when they linked to my site.  Since their
 traffic must have been down, traffic at my site wasn't too bad for a
 while, but I couldn't reach their site to see what was going on.
<p>
 As Slashdot's own network problems cleared up, my load increased.  It
 was looking like it could easily use up my 5GB/month upload limit,
 maybe in less than 24 hours.  After that, I get charged bucks.


<h3>The DNS SlashHole</h3>
<p>
 Well, I needed to dump their traffic, and dump it somewhere fast.
 How about back to slashdot?  At least they'd be able to handle it.
<p>
 I wanted to completely offload the traffic, and just shutting down my
 web server would still submit me to untold connection attempts, so
 the best solution looked like using DNS.  Fortunately I run my own
 name service, so I configured my nameserver so that www.bagley.org
 was CNAME'ed to point at www.slashdot.org.  

 On one hand, most clients would be resolving my address for the first
 time, on the other, my previous DNS TTL was 1 day, so I knew that it
 would probably take a while for my DNS change to fully propagate.  To
 handle the residual connections from clients that had cached the old
 DNS info, I stopped my squid accelerator running on port
 80.  I also changed my TTL to one hour, which should at least allow me
 to redirect my traffic back to my web server faster than I redirected
 it over to slashdot.
<p>
 And bagley.org was off the Web.

<h3>Now what?</h3>
<p>
 July 4, 2001
<p>
 I contacted a friend at my ISP, and got my bandwidth quota doubled
 (thanks Frank!).

<p>
 July 5, 2001
<p>
 Checking my ADSL usage logs (generated every 24 hours by my ISP),
 usage is almost back to normal.  If you get slashdotted, I recommend
 the <i><b>SlashHole</b></i>.  It may save you money.

<p>
 If slashdot had asked me I would have declined the pleasure of being
 posted on their site.

<p><hr><p>
<center>
<a href="http://www.cs.washington.edu/homes/klee/misc/slashdot.html">
<img src="/~doug/shootout/quit-slashdot.png" height="31" width="88">
</a>
</center>

<hr size="5" noshade>
<p>
  <a href="/~doug/contact.shtml">Send me comments or suggestions</a>.

</body>
</html>
