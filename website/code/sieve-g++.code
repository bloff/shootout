<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">// -*- mode: c++ -*-
</FONT></I><I><FONT COLOR="#B22222">// $Id: sieve-g++.code,v 1.1 2004-11-02 08:53:24 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">// http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">// From Bill Lear
</FONT></I><I><FONT COLOR="#B22222">// with help from Stephane Lajoie
</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;iostream&gt;</FONT></B>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;algorithm&gt;</FONT></B>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;vector&gt;</FONT></B>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;cstdlib&gt;</FONT></B>

using namespace std;

<B><FONT COLOR="#228B22">int</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B>(<B><FONT COLOR="#228B22">int</FONT></B> argc, <B><FONT COLOR="#228B22">char</FONT></B> *argv[]) {
    size_t NUM = (argc == 2 ? (atoi(argv[1]) &lt; 1 ? 1 : atoi(argv[1])): 1);

    vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt; primes(8192 + 1);
    vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt;::iterator pbegin = primes.begin();
    vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt;::iterator begin = pbegin + 2;
    vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt;::iterator end = primes.end();

    <B><FONT COLOR="#A020F0">while</FONT></B> (NUM--) {
        fill(begin, end, 1);
        <B><FONT COLOR="#A020F0">for</FONT></B> (vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt;::iterator i = begin; i &lt; end; ++i) {
            <B><FONT COLOR="#A020F0">if</FONT></B> (*i) {
                <B><FONT COLOR="#228B22">const</FONT></B> size_t p = i - pbegin;
                <B><FONT COLOR="#A020F0">for</FONT></B> (vector&lt;<B><FONT COLOR="#228B22">char</FONT></B>&gt;::iterator k = i + p; k &lt; end; k += p) {
                    *k = 0;
                }
            }
        }
    }

    cout &lt;&lt; <B><FONT COLOR="#BC8F8F">&quot;Count: &quot;</FONT></B> &lt;&lt; count(begin, end, 1) &lt;&lt; endl;
}</pre></td></tr></table>
