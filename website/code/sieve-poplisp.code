<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">;;; -*- mode: lisp -*-
</FONT></I><I><FONT COLOR="#B22222">;;; $Id: sieve-poplisp.code,v 1.2 2004-11-08 08:15:52 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">;;; http://shootout.alioth.debian.org/
</FONT></I>
(declaim (optimize (speed 3) (safety 0) (debug 0) (space 0) (compilation-speed 0)))
(<B><FONT COLOR="#A020F0">let</FONT></B> ((n (parse-integer (<B><FONT COLOR="#A020F0">or</FONT></B> (car pop11::poparglist) <B><FONT COLOR="#BC8F8F">&quot;1&quot;</FONT></B>)))
	(flags (make-array 8193 <B><FONT COLOR="#5F9EA0">:element-type</FONT></B> 'fixnum <B><FONT COLOR="#5F9EA0">:initial-element</FONT></B> 1)))
(loop repeat n of-type fixnum for count of-type fixnum = 0 then 0 <B><FONT COLOR="#A020F0">do</FONT></B>
   (loop for i fixnum from 2 upto 8192 <B><FONT COLOR="#A020F0">do</FONT></B>
	  (unless (zerop (aref flags i))
		(loop for k fixnum from (* 2 i) upto 8192 by i <B><FONT COLOR="#A020F0">do</FONT></B>
			  (setf (aref flags k) 0))
		(incf count)))
   finally (format t <B><FONT COLOR="#BC8F8F">&quot;Count: ~D~%&quot;</FONT></B> count)))</pre></td></tr></table>
