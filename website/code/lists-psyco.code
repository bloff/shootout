<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/python
</FONT></I><I><FONT COLOR="#B22222"># $Id: lists-psyco.code,v 1.2 2004-11-08 08:15:15 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222"># with improvements from Mark Baker
</FONT></I>
<B><FONT COLOR="#A020F0">import</FONT></B> sys, psyco
psyco.full()

SIZE = 10000

<B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">test_lists</FONT></B>():
    Li1 = range(1, SIZE + 1)
    Li2 = Li1[:]
    Li3 = []

    <I><FONT COLOR="#B22222"># remove each individual item from left side of Li2 and
</FONT></I>    <I><FONT COLOR="#B22222"># append to right side of Li3 (preserving order)
</FONT></I>    <I><FONT COLOR="#B22222"># 
</FONT></I>    <I><FONT COLOR="#B22222"># popping the first element is *expensive*
</FONT></I>    <I><FONT COLOR="#B22222">#
</FONT></I>    <I><FONT COLOR="#B22222">#while Li2:
</FONT></I>    <I><FONT COLOR="#B22222">#    Li3.append(Li2.pop(0))   
</FONT></I>    Li2.reverse()
    <B><FONT COLOR="#A020F0">while</FONT></B> Li2:
        Li3.append(Li2.pop())
    <B><FONT COLOR="#A020F0">while</FONT></B> Li3:
        Li2.append(Li3.pop())
    Li1.reverse()
    <B><FONT COLOR="#A020F0">if</FONT></B> Li1[0] != SIZE:
        <B><FONT COLOR="#A020F0">return</FONT></B> 0
    <B><FONT COLOR="#A020F0">if</FONT></B> Li1 == Li2:
        <B><FONT COLOR="#A020F0">return</FONT></B> len(Li1)
    <B><FONT COLOR="#A020F0">else</FONT></B>:
        <B><FONT COLOR="#A020F0">return</FONT></B> 0

<B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B>():
    NUM = int(sys.argv[1])
    <B><FONT COLOR="#A020F0">if</FONT></B> NUM &lt; 1:
        NUM = 1
    <B><FONT COLOR="#A020F0">while</FONT></B> NUM &gt; 0:
        result = test_lists()
        NUM = NUM - 1
    <B><FONT COLOR="#A020F0">print</FONT></B> result

main()</pre></td></tr></table>
