<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">\ -*- mode: forth -*-
</FONT></I><I><FONT COLOR="#B22222">\ $Id: hash2-gforth.code,v 1.1 2004-11-02 08:52:31 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">\ http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">\ from Anton Ertl:
</FONT></I>

0. argc @ 1<B><FONT COLOR="#5F9EA0">-</FONT></B> arg <B><FONT COLOR="#5F9EA0">&gt;</FONT></B>number <B><FONT COLOR="#5F9EA0">2drop</FONT></B> <B><FONT COLOR="#5F9EA0">drop</FONT></B> <B><FONT COLOR="#A020F0">constant</FONT></B> NUM

wordlist <B><FONT COLOR="#A020F0">constant</FONT></B> hash1
wordlist <B><FONT COLOR="#A020F0">constant</FONT></B> hash2

<B><FONT COLOR="#A020F0">: </FONT></B><B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">build</FONT></I></B></FONT></B> ( <B><FONT COLOR="#5F9EA0">-</FONT></B><B><FONT COLOR="#5F9EA0">-</FONT></B> )
    get<B><FONT COLOR="#5F9EA0">-</FONT></B>current hash1 set<B><FONT COLOR="#5F9EA0">-</FONT></B>current
    10000 0 ?<B><FONT COLOR="#A020F0">do</FONT></B>
	i 0 &lt;# #s '_ <B><FONT COLOR="#A020F0">hold</FONT></B> 'o <B><FONT COLOR="#A020F0">hold</FONT></B> 'o <B><FONT COLOR="#A020F0">hold</FONT></B> 'f <B><FONT COLOR="#A020F0">hold</FONT></B> #<B><FONT COLOR="#5F9EA0">&gt;</FONT></B> nextname i <B><FONT COLOR="#A020F0">constant</FONT></B>
    <B><FONT COLOR="#A020F0">loop</FONT></B>
    set<B><FONT COLOR="#5F9EA0">-</FONT></B>current ;

<B><FONT COLOR="#A020F0">: </FONT></B><B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">search-new</FONT></I></B></FONT></B> ( addr u wid <B><FONT COLOR="#5F9EA0">-</FONT></B><B><FONT COLOR="#5F9EA0">-</FONT></B> xt )
    <B><FONT COLOR="#5F9EA0">&gt;</FONT></B>r <B><FONT COLOR="#5F9EA0">2dup</FONT></B> r@ search<B><FONT COLOR="#5F9EA0">-</FONT></B>wordlist <B><FONT COLOR="#A020F0">if</FONT></B>
	rdrop <B><FONT COLOR="#5F9EA0">nip</FONT></B> <B><FONT COLOR="#5F9EA0">nip</FONT></B>
    <B><FONT COLOR="#A020F0">else</FONT></B>
	nextname get<B><FONT COLOR="#5F9EA0">-</FONT></B>current r<B><FONT COLOR="#5F9EA0">&gt;</FONT></B> set<B><FONT COLOR="#5F9EA0">-</FONT></B>current 0 <B><FONT COLOR="#A020F0">constant</FONT></B> set<B><FONT COLOR="#5F9EA0">-</FONT></B>current
	lastxt
    <B><FONT COLOR="#A020F0">endif</FONT></B> ;

<B><FONT COLOR="#A020F0">: </FONT></B><B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">add-to-hash2</FONT></I></B></FONT></B> ( nt <B><FONT COLOR="#5F9EA0">-</FONT></B><B><FONT COLOR="#5F9EA0">-</FONT></B> )
    <B><FONT COLOR="#5F9EA0">dup</FONT></B> name<B><FONT COLOR="#5F9EA0">&gt;</FONT></B>int execute ( nt n )
    <B><FONT COLOR="#5F9EA0">swap</FONT></B> name<B><FONT COLOR="#5F9EA0">&gt;</FONT></B>string hash2 search<B><FONT COLOR="#5F9EA0">-</FONT></B>new <B><FONT COLOR="#5F9EA0">&gt;</FONT></B>body <B><FONT COLOR="#5F9EA0">+</FONT></B><B><FONT COLOR="#5F9EA0">!</FONT></B> ;

<B><FONT COLOR="#A020F0">: </FONT></B><B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">build2</FONT></I></B></FONT></B> ( <B><FONT COLOR="#5F9EA0">-</FONT></B><B><FONT COLOR="#5F9EA0">-</FONT></B> )
    hash1 wordlist<B><FONT COLOR="#5F9EA0">-</FONT></B>id <B><FONT COLOR="#A020F0">begin</FONT></B>
	@ <B><FONT COLOR="#5F9EA0">dup</FONT></B>
    <B><FONT COLOR="#A020F0">while</FONT></B>
	<B><FONT COLOR="#5F9EA0">dup</FONT></B> add<B><FONT COLOR="#5F9EA0">-</FONT></B>to<B><FONT COLOR="#5F9EA0">-</FONT></B>hash2
    <B><FONT COLOR="#A020F0">repeat</FONT></B>
    <B><FONT COLOR="#5F9EA0">drop</FONT></B> ;

<B><FONT COLOR="#A020F0">: </FONT></B><B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">countdecs</FONT></I></B></FONT></B> ( <B><FONT COLOR="#5F9EA0">-</FONT></B><B><FONT COLOR="#5F9EA0">-</FONT></B> )
    NUM 0 ?<B><FONT COLOR="#A020F0">do</FONT></B>
	build2
    <B><FONT COLOR="#A020F0">loop</FONT></B> ;

build countdecs

hash1 <B><FONT COLOR="#5F9EA0">&gt;</FONT></B><B><FONT COLOR="#5F9EA0">order</FONT></B>
foo_1 .
foo_9999 .
previous

hash2 <B><FONT COLOR="#5F9EA0">&gt;</FONT></B><B><FONT COLOR="#5F9EA0">order</FONT></B>
foo_1 .
foo_9999 0 .r cr
previous <B><FONT COLOR="#5F9EA0">bye</FONT></B></pre></td></tr></table>
