<span class="slc">%%% $Id: sumcol-oz.code,v 1.8 2006-07-06 04:34:59 igouy-guest Exp $</span>
<span class="slc">%%% http://dada.perl.it/shootout/</span>
<span class="kwa">functor</span>
<span class="kwa">import</span>
    System<span class="sym">(</span>printInfo<span class="sym">)</span>
    Application<span class="sym">(</span>exit<span class="sym">)</span>
    Open<span class="sym">(</span>text file<span class="sym">)</span>
    OS
<span class="kwb">define</span>
<span class="kwa">class</span> TextFile
  <span class="kwb">from</span> Open.file Open.text
<span class="kwb">end</span>

<span class="kwb">fun</span> <span class="sym">{</span>SumLines FILE SUM<span class="sym">}</span>
    <span class="kwb">case</span> <span class="sym">{</span>FILE getS<span class="sym">(</span>$<span class="sym">)}</span> <span class="kwb">of</span> false <span class="kwb">then</span>
        SUM
    <span class="kwb">elseof</span> LINE <span class="kwb">then</span>
        <span class="sym">{</span>SumLines FILE SUM<span class="sym">+{</span>String.toInt LINE<span class="sym">}}</span>
    <span class="kwb">end</span>
<span class="kwb">end</span>

<span class="kwb">in</span>
    <span class="kwa">local</span> STDIN SUM <span class="kwb">in</span>
        STDIN <span class="sym">= {</span>New TextFile init<span class="sym">(</span>name<span class="sym">:</span>stdin<span class="sym">)}</span>
        SUM <span class="sym">= {</span>SumLines STDIN <span class="num">0</span><span class="sym">}</span>
        <span class="sym">{</span>System.printInfo SUM<span class="sym">}</span>
        <span class="sym">{</span>System.printInfo <span class="str">&quot;</span><span class="esc">\n</span><span class="str">&quot;</span><span class="sym">}</span>
    <span class="kwb">end</span>
    <span class="sym">{</span>Application.exit <span class="num">0</span><span class="sym">}</span>
<span class="kwb">end</span>
