<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">// $Id: objinst-kaffe.code,v 1.1 2004-11-02 08:52:38 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">// http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">// Collection class code is from my friend Phil Chu, Thanks Phil!
</FONT></I>
<B><FONT COLOR="#A020F0">import</FONT></B> java.io.*;
<B><FONT COLOR="#A020F0">import</FONT></B> java.util.*;
<B><FONT COLOR="#A020F0">import</FONT></B> java.text.*;

<B><FONT COLOR="#A020F0">class</FONT></B> Toggle {
    <B><FONT COLOR="#A020F0">boolean</FONT></B> state = <B><FONT COLOR="#A020F0">true</FONT></B>;
    <B><FONT COLOR="#A020F0">public</FONT></B> Toggle(<B><FONT COLOR="#A020F0">boolean</FONT></B> start_state) {
	<B><FONT COLOR="#A020F0">this</FONT></B>.state = start_state;
    }
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">boolean</FONT></B> value() {
	<B><FONT COLOR="#A020F0">return</FONT></B>(<B><FONT COLOR="#A020F0">this</FONT></B>.state);
    }
    <B><FONT COLOR="#A020F0">public</FONT></B> Toggle activate() {
	<B><FONT COLOR="#A020F0">this</FONT></B>.state = !<B><FONT COLOR="#A020F0">this</FONT></B>.state;
	<B><FONT COLOR="#A020F0">return</FONT></B>(<B><FONT COLOR="#A020F0">this</FONT></B>);
    }
}

<B><FONT COLOR="#A020F0">class</FONT></B> NthToggle <B><FONT COLOR="#A020F0">extends</FONT></B> Toggle {
    <B><FONT COLOR="#A020F0">int</FONT></B> count_max = 0;
    <B><FONT COLOR="#A020F0">int</FONT></B> counter = 0;

    <B><FONT COLOR="#A020F0">public</FONT></B> NthToggle(<B><FONT COLOR="#A020F0">boolean</FONT></B> start_state, <B><FONT COLOR="#A020F0">int</FONT></B> max_counter) {
	<B><FONT COLOR="#A020F0">super</FONT></B>(start_state);
	<B><FONT COLOR="#A020F0">this</FONT></B>.count_max = max_counter;
	<B><FONT COLOR="#A020F0">this</FONT></B>.counter = 0;
    }
    <B><FONT COLOR="#A020F0">public</FONT></B> Toggle activate() {
	<B><FONT COLOR="#A020F0">this</FONT></B>.counter += 1;
	<B><FONT COLOR="#A020F0">if</FONT></B> (<B><FONT COLOR="#A020F0">this</FONT></B>.counter &gt;= <B><FONT COLOR="#A020F0">this</FONT></B>.count_max) {
	    <B><FONT COLOR="#A020F0">this</FONT></B>.state = !<B><FONT COLOR="#A020F0">this</FONT></B>.state;
	    <B><FONT COLOR="#A020F0">this</FONT></B>.counter = 0;
	}
	<B><FONT COLOR="#A020F0">return</FONT></B>(<B><FONT COLOR="#A020F0">this</FONT></B>);
    }
}

<B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">class</FONT></B> objinst {
    <B><FONT COLOR="#A020F0">public</FONT></B> <B><FONT COLOR="#A020F0">static</FONT></B> <B><FONT COLOR="#A020F0">void</FONT></B> main(String args[]) <B><FONT COLOR="#A020F0">throws</FONT></B> IOException {
	<B><FONT COLOR="#A020F0">int</FONT></B> n = Integer.parseInt(args[0]);
	Toggle toggle1 = <B><FONT COLOR="#A020F0">new</FONT></B> Toggle(<B><FONT COLOR="#A020F0">true</FONT></B>);
	<B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i=0; i&lt;5; i++) {
	    System.out.println((toggle1.activate().value()) ? <B><FONT COLOR="#BC8F8F">&quot;true&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;false&quot;</FONT></B>);
	}
	<B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i=0; i&lt;n; i++) {
	    Toggle toggle = <B><FONT COLOR="#A020F0">new</FONT></B> Toggle(<B><FONT COLOR="#A020F0">true</FONT></B>);
	}

	System.out.println(<B><FONT COLOR="#BC8F8F">&quot;&quot;</FONT></B>);
	
	NthToggle ntoggle1 = <B><FONT COLOR="#A020F0">new</FONT></B> NthToggle(<B><FONT COLOR="#A020F0">true</FONT></B>, 3);
	<B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i=0; i&lt;8; i++) {
	    System.out.println((ntoggle1.activate().value()) ? <B><FONT COLOR="#BC8F8F">&quot;true&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;false&quot;</FONT></B>);
	}
	<B><FONT COLOR="#A020F0">for</FONT></B> (<B><FONT COLOR="#A020F0">int</FONT></B> i=0; i&lt;n; i++) {
	    NthToggle toggle = <B><FONT COLOR="#A020F0">new</FONT></B> NthToggle(<B><FONT COLOR="#A020F0">true</FONT></B>, 3);
	}
    }
}</pre></td></tr></table>
