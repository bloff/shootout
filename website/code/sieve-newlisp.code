<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
#!/usr/bin/newlisp

# sieve - benchmark
# requires newLISP v. 7.5.2 <B><FONT COLOR="#A020F0">or</FONT></B> later
#
# Contributed by Lutz Mueller

(<B><FONT COLOR="#A020F0">define</FONT></B> (<B><FONT COLOR="#0000FF">main</FONT></B>)
	(set 'NUM (integer (nth 2 (main-args))))

	(dotimes (p NUM)
		(set 'flags (array 8193 '(1)))
		(set 'cnt 0)

		(for (i 2 8192)
			(<B><FONT COLOR="#A020F0">if</FONT></B> (= (nth i flags) 1)
				(<B><FONT COLOR="#A020F0">begin</FONT></B>
					(set 'k (+ i i))
					(while (&lt;= k 8192)
						(nth-set k flags 0)
						(inc 'k i))
					(inc 'cnt)))))
				
	(println <B><FONT COLOR="#BC8F8F">&quot;Count: &quot;</FONT></B> cnt))

(main)

(exit)</pre></td></tr></table>
