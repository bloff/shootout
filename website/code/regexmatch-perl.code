<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/perl 
</FONT></I><I><FONT COLOR="#B22222"># $Id: regexmatch-perl.code,v 1.1 2004-11-02 08:52:40 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://www.bagley.org/~doug/shootout/
</FONT></I>
<B><FONT COLOR="#A020F0">use</FONT></B> strict;

<B><FONT COLOR="#A020F0">my</FONT></B> $re = qr{
    (?: ^ | [^\d\(])		<I><FONT COLOR="#B22222"># must be preceeded by non-digit
</FONT></I>    ( \( )?			<I><FONT COLOR="#B22222"># match 1: possible initial left paren
</FONT></I>    (\d\d\d)			<I><FONT COLOR="#B22222"># match 2: area code is 3 digits
</FONT></I>    (?(1) \) )			<I><FONT COLOR="#B22222"># if match1 then match right paren
</FONT></I>    [ ]				<I><FONT COLOR="#B22222"># area code followed by one space
</FONT></I>    (\d\d\d)			<I><FONT COLOR="#B22222"># match 3: prefix of 3 digits
</FONT></I>    [ -]			<I><FONT COLOR="#B22222"># separator is either space or dash
</FONT></I>    (\d\d\d\d)			<I><FONT COLOR="#B22222"># match 4: last 4 digits
</FONT></I>    \D				<I><FONT COLOR="#B22222"># must be followed by a non-digit
</FONT></I>}<B><FONT COLOR="#A020F0">x</FONT></B>;

<B><FONT COLOR="#A020F0">my</FONT></B> $NUM = $ARGV[0];
$NUM = 1 <B><FONT COLOR="#A020F0">if</FONT></B> ($NUM &lt; 1);

<B><FONT COLOR="#A020F0">my</FONT></B> @phones = &lt;STDIN&gt;;
<B><FONT COLOR="#A020F0">my</FONT></B> $count = 0;
<B><FONT COLOR="#A020F0">my</FONT></B> $num;
<B><FONT COLOR="#A020F0">while</FONT></B> ($NUM--) {
    <B><FONT COLOR="#A020F0">foreach</FONT></B> (@phones) {
	<B><FONT COLOR="#A020F0">if</FONT></B> (/$re/o) {
	    $num = <B><FONT COLOR="#BC8F8F">&quot;($2) $3-$4&quot;</FONT></B>;
	    <B><FONT COLOR="#A020F0">if</FONT></B> (0 == $NUM) {
		$count++;
		<B><FONT COLOR="#A020F0">print</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;$count: $num\n&quot;</FONT></B>;
	    }
	}
    }
}</pre></td></tr></table>
