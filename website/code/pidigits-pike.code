<span class="slc">// The Great Computer Language Shootout
</span><span class="slc">// http://shootout.alioth.debian.org/
</span><span class="slc">//
</span><span class="slc">// contributed by Marcus Comstedt
</span>
<span class="kwb">int</span> k <span class="sym">=</span> <span class="num">0</span><span class="sym">;
</span><span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> z <span class="sym">= ({</span> <span class="num">1</span><span class="sym">,</span> <span class="num">0</span><span class="sym">,</span> <span class="num">0</span><span class="sym">,</span> <span class="num">1</span> <span class="sym">});

</span><span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> compose<span class="sym">(</span><span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> a<span class="sym">,</span> <span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> b<span class="sym">)
{
</span>  return <span class="sym">({</span> a<span class="sym">[</span><span class="num">0</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">0</span><span class="sym">],</span> a<span class="sym">[</span><span class="num">0</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">1</span><span class="sym">]+</span>a<span class="sym">[</span><span class="num">1</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">3</span><span class="sym">],
</span>	    a<span class="sym">[</span><span class="num">2</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">0</span><span class="sym">]+</span>a<span class="sym">[</span><span class="num">3</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">2</span><span class="sym">],</span> a<span class="sym">[</span><span class="num">2</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">1</span><span class="sym">]+</span>a<span class="sym">[</span><span class="num">3</span><span class="sym">]*</span>b<span class="sym">[</span><span class="num">3</span><span class="sym">] });
}

</span><span class="kwb">int</span> extract<span class="sym">(</span><span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> a<span class="sym">,</span> <span class="kwb">int</span> j<span class="sym">)
{
</span>  return <span class="sym">(</span>a<span class="sym">[</span><span class="num">0</span><span class="sym">]*</span>j<span class="sym">+</span>a<span class="sym">[</span><span class="num">1</span><span class="sym">]) / (</span>a<span class="sym">[</span><span class="num">2</span><span class="sym">]*</span>j<span class="sym">+</span>a<span class="sym">[</span><span class="num">3</span><span class="sym">]);
}

</span><span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> pi_digits<span class="sym">(</span><span class="kwb">int</span> c<span class="sym">)
{
</span>  <span class="kwb">array</span><span class="sym">(</span><span class="kwb">int</span><span class="sym">)</span> r <span class="sym">=</span> <span class="kwa">allocate</span><span class="sym">(</span>c<span class="sym">);
</span>  for<span class="sym">(</span><span class="kwb">int</span> i<span class="sym">=</span><span class="num">0</span><span class="sym">;</span> i<span class="sym">&lt;</span>c<span class="sym">;</span> i<span class="sym">++) {
</span>    <span class="kwb">int</span> y<span class="sym">;
</span>    while<span class="sym">((</span>y <span class="sym">=</span> extract<span class="sym">(</span>z<span class="sym">,</span> <span class="num">3</span><span class="sym">)) !=</span> extract<span class="sym">(</span>z<span class="sym">,</span> <span class="num">4</span><span class="sym">)) {
      ++</span>k<span class="sym">;
</span>      z <span class="sym">=</span> compose<span class="sym">(</span>z<span class="sym">, ({</span>k<span class="sym">,</span> <span class="num">4</span><span class="sym">*</span>k<span class="sym">+</span><span class="num">2</span><span class="sym">,</span> <span class="num">0</span><span class="sym">,</span> <span class="num">2</span><span class="sym">*</span>k<span class="sym">+</span><span class="num">1</span><span class="sym">}));
    }
</span>    z <span class="sym">=</span> compose<span class="sym">(({</span><span class="num">10</span><span class="sym">, -</span><span class="num">10</span><span class="sym">*</span>y<span class="sym">,</span> <span class="num">0</span><span class="sym">,</span> <span class="num">1</span><span class="sym">}),</span> z<span class="sym">);
</span>    r<span class="sym">[</span>i<span class="sym">] =</span> y<span class="sym">;
  }
</span>  return r<span class="sym">;
}

</span><span class="kwb">int</span> main<span class="sym">(</span><span class="kwb">int</span> argc<span class="sym">,</span> <span class="kwb">array</span><span class="sym">(</span><span class="kwb">string</span><span class="sym">)</span> argv<span class="sym">)
{
</span>  <span class="kwb">int</span> i<span class="sym">,</span> n <span class="sym">= (</span><span class="kwb">int</span><span class="sym">)</span>argv<span class="sym">[</span><span class="num">1</span><span class="sym">];
</span>  for<span class="sym">(</span>i<span class="sym">=</span><span class="num">10</span><span class="sym">;</span> i <span class="sym">&lt;=</span> n<span class="sym">;</span> i<span class="sym">+=</span><span class="num">10</span><span class="sym">)
</span>    <span class="kwa">write</span><span class="sym">(</span><span class="str">&quot;%&#64;d</span><span class="esc">\t </span> <span class="str">:%d</span><span class="esc">\n</span><span class="str">&quot;</span><span class="sym">,</span> pi_digits<span class="sym">(</span><span class="num">10</span><span class="sym">),</span> i<span class="sym">);
</span>  if<span class="sym">((</span>i<span class="sym">-=</span><span class="num">10</span><span class="sym">) &lt;</span> n<span class="sym">)
</span>    <span class="kwa">write</span><span class="sym">(</span><span class="str">&quot;%-10{%d%}</span><span class="esc">\t </span> <span class="str">:%d</span><span class="esc">\n</span><span class="str">&quot;</span><span class="sym">,</span> pi_digits<span class="sym">(</span>n<span class="sym">-</span>i<span class="sym">)/</span><span class="num">1</span><span class="sym">,</span> n<span class="sym">);
</span>  return <span class="num">0</span><span class="sym">;
}</span>
