<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/tclsh
</FONT></I><I><FONT COLOR="#B22222"># $Id: wordfreq-tcl.code,v 1.2 2004-11-08 08:15:55 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://shootout.alioth.debian.org/
</FONT></I><I><FONT COLOR="#B22222"># with help from: Tom Wilkason and Branko Vesligaj
</FONT></I>
<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B> {<FONT COLOR="#B8860B"></FONT>} {
    <B><FONT COLOR="#A020F0">while</FONT></B> {1} {
	<B><FONT COLOR="#A020F0">set</FONT></B> data [<B><FONT COLOR="#A020F0">read</FONT></B> stdin 4096]
	<B><FONT COLOR="#A020F0">if</FONT></B> {[<B><FONT COLOR="#A020F0">string</FONT></B> equal $<FONT COLOR="#B8860B">data</FONT> {}]} {<B><FONT COLOR="#A020F0">break</FONT></B>}
	<B><FONT COLOR="#A020F0">if</FONT></B> {[<B><FONT COLOR="#A020F0">gets</FONT></B> stdin extra] &gt;= 0} {
	    <B><FONT COLOR="#A020F0">append</FONT></B> data $<FONT COLOR="#B8860B">extra</FONT>
	}
	<B><FONT COLOR="#A020F0">regsub</FONT></B> -all  {[^[:alpha:]]+} $<FONT COLOR="#B8860B">data</FONT> { } line
	<B><FONT COLOR="#A020F0">foreach</FONT></B> word [<B><FONT COLOR="#A020F0">string</FONT></B> tolower $<FONT COLOR="#B8860B">line</FONT>] {
	    <B><FONT COLOR="#A020F0">if</FONT></B> {[<B><FONT COLOR="#A020F0">catch</FONT></B> {<B><FONT COLOR="#A020F0">incr</FONT></B> count($<FONT COLOR="#B8860B">word</FONT>)}]} {
		<B><FONT COLOR="#A020F0">set</FONT></B> count($<FONT COLOR="#B8860B">word</FONT>) 1
	    }
	}
    }
    <B><FONT COLOR="#A020F0">foreach</FONT></B> {word cnt}  [<B><FONT COLOR="#A020F0">array</FONT></B> get count] {
	<B><FONT COLOR="#A020F0">lappend</FONT></B> lines [<B><FONT COLOR="#A020F0">format</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;%7d %s&quot;</FONT></B> $<FONT COLOR="#B8860B">cnt</FONT> $<FONT COLOR="#B8860B">word</FONT>]
    }
    <B><FONT COLOR="#A020F0">puts</FONT></B> [<B><FONT COLOR="#A020F0">join</FONT></B> [<B><FONT COLOR="#A020F0">lsort</FONT></B> -decreasing $<FONT COLOR="#B8860B">lines</FONT>] <B><FONT COLOR="#BC8F8F">&quot;\n&quot;</FONT></B>]
}

main
</pre></td></tr></table>
