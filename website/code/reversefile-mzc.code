<span class="line">    1 </span>#<span class="sym">!/</span>usr<span class="sym">/</span>bin<span class="sym">/</span>mzscheme <span class="sym">-</span>r
<span class="line">    2 </span><span class="slc">;;; -*- mode: scheme -*-
</span><span class="line">    3 </span><span class="slc"></span><span class="slc">;;; $Id: reversefile-mzc.code,v 1.3 2004-11-11 07:14:12 bfulgham Exp $
</span><span class="line">    4 </span><span class="slc"></span><span class="slc">;;; http://shootout.alioth.debian.org/
</span><span class="line">    5 </span><span class="slc"></span><span class="slc">;;; Provided by Bengt Kleberg
</span><span class="line">    6 </span><span class="slc"></span><span class="sym">(</span>define <span class="kwa">reverse</span><span class="sym">-</span>input
<span class="line">    7 </span>   <span class="sym">(</span><span class="kwa">lambda</span> <span class="sym">(</span>inport<span class="sym">)
</span><span class="line">    8 </span><span class="sym">     (</span>letrec <span class="sym">((</span>rev <span class="sym">(</span><span class="kwa">lambda</span> <span class="sym">(</span><span class="kwa">line</span><span class="sym">)
</span><span class="line">    9 </span><span class="sym">                    (</span><span class="kwa">if</span> <span class="sym">(</span>eof<span class="sym">-</span>object? <span class="kwa">line</span><span class="sym">)
</span><span class="line">   10 </span><span class="sym"></span>                         <span class="str">'ok
</span><span class="line">   11 </span><span class="str">                      (begin
</span><span class="line">   12 </span><span class="str">                       (rev (read-line inport))
</span><span class="line">   13 </span><span class="str">                       (display line)
</span><span class="line">   14 </span><span class="str">                       (newline))))))
</span><span class="line">   15 </span><span class="str">            (rev  (read-line inport)))))
</span><span class="line">   16 </span><span class="str">
</span><span class="line">   17 </span><span class="str">(define main
</span><span class="line">   18 </span><span class="str">   (lambda ()
</span><span class="line">   19 </span><span class="str">     (reverse-input (current-input-port))))
</span><span class="line">   20 </span><span class="str">
</span><span class="line">   21 </span><span class="str">(main)</span>
