<span class="slc">#!/usr/bin/ruby
</span><span class="slc"># -*- mode: ruby -*-
</span><span class="slc"># $Id: wordfreq-ruby.code,v 1.6 2005-05-23 06:14:26 bfulgham Exp $
</span><span class="slc"># http://shootout.alioth.debian.org/
</span>
freq = Hash.new<span class="sym">(</span><span class="num">0</span><span class="sym">)
</span>loop <span class="sym">{
</span>    <span class="kwa">data</span> = <span class="sym">(</span><span class="kwa">STDIN</span>.read<span class="sym">(</span><span class="num">4095</span><span class="sym">)</span> <span class="kwa">or break</span><span class="sym">) &lt;&lt; (</span><span class="kwa">STDIN</span>.gets <span class="sym">||</span> <span class="str">&quot;&quot;</span><span class="sym">)
</span>    <span class="kwa">for</span> word <span class="kwa">in data</span>.downcase.tr_s<span class="sym">(</span><span class="str">'^A-Za-z'</span><span class="sym">,</span><span class="str">' '</span><span class="sym">)</span>.split<span class="sym">(</span><span class="str">' '</span><span class="sym">)
</span>	freq<span class="sym">[</span>word<span class="sym">] +</span>= <span class="num">1
</span>    <span class="kwa">end
</span><span class="sym">}
</span>freq.delete<span class="sym">(</span><span class="str">&quot;&quot;</span><span class="sym">)

</span>lines = Array.new
freq.each<span class="sym">{|</span>w<span class="sym">,</span>c<span class="sym">|</span> lines <span class="sym">&lt;&lt;</span> sprintf<span class="sym">(</span><span class="str">&quot;%7d %s\n&quot;</span><span class="sym">,</span> c<span class="sym">,</span> w<span class="sym">) }
</span>print lines.sort.reverse
