<span class="slc">;;; spellcheck benchmark
</span><span class="slc">;;; $Id: spellcheck-chicken.code,v 1.1 2005-03-16 08:37:53 bfulgham Exp $
</span><span class="slc">;;; http://shootout.alioth.debian.org/
</span><span class="slc">;;;
</span><span class="slc">;;; Contributed by Ruhi Bloodworth
</span>
<span class="slc">; read the word dictionary
</span><span class="slc">; read words from standard input and print those words
</span><span class="slc">;    which do not appear in the dictionary
</span><span class="slc">; both the dictionary and standard input have only one word per line
</span><span class="slc">; no line will exceed 128 characters (including newline)
</span>
<span class="sym">(</span>require <span class="str">'utils)

(declare
  (uses utils)
  (disable-interrupts)
  (block)
  (usual-integrations)
  (fixnum))

(define input (open-input-file &quot;Usr.Dict.Words&quot;))

(define dict (make-hash-table string=? 10000))

(define (main)
  (for-each-line (lambda (line)
  		   (hash-table-set! dict line #t))
		  input)

  (for-each-line (lambda (word)
          	   (if (not (hash-table-ref dict word))
		       (print word)))))</span>
