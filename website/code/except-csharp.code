<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">// $Id: except-csharp.code,v 1.2 2004-11-08 08:15:13 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">// http://shootout.alioth.debian.org
</FONT></I><I><FONT COLOR="#B22222">// contributed by Erik Saltwell
</FONT></I><I><FONT COLOR="#B22222">// Some clean-ups based on suggestions by Isaac Gouy
</FONT></I>
using System;

class LoException : System.Exception
{
    public LoException() {}
}

class HiException : System.Exception 
{
    public HiException() {}
}

public class except
{
    <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">int</FONT></B> Lo = 0;
    <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">int</FONT></B> Hi = 0;
    <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">int</FONT></B> count=0;
    
    public <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> Main(string[] args)
    {
        <B><FONT COLOR="#228B22">int</FONT></B> n = <B><FONT COLOR="#228B22">int</FONT></B>.Parse(args[0]);
        <B><FONT COLOR="#A020F0">for</FONT></B> (count=0; count&lt;n; count++) 
        {
            SomeFunction();
        }
        Console.WriteLine(<B><FONT COLOR="#BC8F8F">&quot;Exceptions: HI={0} / LO={1}&quot;</FONT></B>, Hi, Lo);
    }

    public <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> SomeFunction() 
    {
        try 
        {
            HiFunction();
        } 
        catch (Exception e) 
        {
            Console.WriteLine(<B><FONT COLOR="#BC8F8F">&quot;We shouldn't get here: {0}&quot;</FONT></B>, e.Message);
        }
    }

    public <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> HiFunction() 
    {
        try 
        {
            LoFunction();
        } 
        catch (HiException) 
        {
            Hi++;
        }
    }

    public <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> LoFunction()
    {
        try 
        {
            BlowUp();
        } 
        catch (LoException) 
        {
            Lo++;
        }
    }
    
    public <B><FONT COLOR="#228B22">static</FONT></B> <B><FONT COLOR="#228B22">void</FONT></B> BlowUp() 
    {
        <B><FONT COLOR="#A020F0">if</FONT></B> ((count &amp; 1) == 0) 
        {
            throw new LoException();
	} 
        <B><FONT COLOR="#A020F0">else</FONT></B> 
        {
            throw new HiException();
        }
    }
}</pre></td></tr></table>
