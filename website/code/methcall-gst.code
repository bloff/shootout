<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<B><FONT COLOR="#BC8F8F">&quot;  The Great Computer Language Shootout
   contributed by Isaac Gouy

   To run: gst -QI /usr/local/share/smalltalk/gst.im methcall.st -a 1000000
&quot;</FONT></B>

Object subclass: <I><FONT COLOR="#B22222">#Toggle
</FONT></I>instanceVariableNames: <B><FONT COLOR="#BC8F8F">'state'</FONT></B>
classVariableNames: <B><FONT COLOR="#BC8F8F">''</FONT></B>
poolDictionaries: <B><FONT COLOR="#BC8F8F">''</FONT></B>
category: nil !

!Toggle class methodsFor: <B><FONT COLOR="#BC8F8F">'instance creation'</FONT></B>!

<B><FONT COLOR="#A020F0">new</FONT></B>: aBoolean
   ^self basicNew initialize: aBoolean ! !


!Toggle methodsFor: <B><FONT COLOR="#BC8F8F">'private'</FONT></B>!

initialize: aBoolean
   state := aBoolean ! !


!Toggle methodsFor: <B><FONT COLOR="#BC8F8F">'accessing'</FONT></B>!

activate
   state := state <B><FONT COLOR="#A020F0">not</FONT></B> !

state
   ^state ! !


Toggle subclass: <I><FONT COLOR="#B22222">#NToggle
</FONT></I>instanceVariableNames: <B><FONT COLOR="#BC8F8F">'trigger count'</FONT></B>
classVariableNames: <B><FONT COLOR="#BC8F8F">''</FONT></B>
poolDictionaries: <B><FONT COLOR="#BC8F8F">''</FONT></B>
category: nil !


!NToggle class methodsFor: <B><FONT COLOR="#BC8F8F">'instance creation'</FONT></B>!

<B><FONT COLOR="#A020F0">new</FONT></B>: aBoolean withTrigger: anInteger
   ^(super <B><FONT COLOR="#A020F0">new</FONT></B>: aBoolean) withTrigger: anInteger ! !


!NToggle methodsFor: <B><FONT COLOR="#BC8F8F">'private'</FONT></B>!

withTrigger: anInteger
   trigger := anInteger.
   count := 0 ! !


!NToggle methodsFor: <B><FONT COLOR="#BC8F8F">'accessing'</FONT></B>!

activate
   <B><FONT COLOR="#BC8F8F">&quot;Toggle and answer the receiver&quot;</FONT></B>
   (count := count + 1) &gt;= trigger ifTrue: [
      state := state <B><FONT COLOR="#A020F0">not</FONT></B>. 
      count := 0
   ] ! !


| n toggle ntoggle value |
n := Smalltalk arguments first asInteger.

toggle := Toggle <B><FONT COLOR="#A020F0">new</FONT></B>: true.
n timesRepeat: [value := toggle activate state]. 
value displayNl.

ntoggle := NToggle <B><FONT COLOR="#A020F0">new</FONT></B>: true withTrigger: 3.
n timesRepeat: [value := ntoggle activate state].
value displayNl !</pre></td></tr></table>
