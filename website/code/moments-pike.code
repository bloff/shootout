<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
#!/<B><FONT COLOR="#5F9EA0">usr/bin/pike</FONT></B>
<I><FONT COLOR="#B22222">// -*- mode: pike -*-
</FONT></I><I><FONT COLOR="#B22222">// $Id: moments-pike.code,v 1.1 2004-11-02 08:52:37 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">// http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">// from: Fredrik Noring
</FONT></I>
class Moments
{
    <B><FONT COLOR="#228B22">int</FONT></B> N;
    <B><FONT COLOR="#228B22">float</FONT></B> median;
    <B><FONT COLOR="#228B22">float</FONT></B> mean;
    <B><FONT COLOR="#228B22">float</FONT></B> average_deviation;
    <B><FONT COLOR="#228B22">float</FONT></B> standard_deviation;
    <B><FONT COLOR="#228B22">float</FONT></B> variance;
    <B><FONT COLOR="#228B22">float</FONT></B> skew;
    <B><FONT COLOR="#228B22">float</FONT></B> kurtosis;
    
    <B><FONT COLOR="#228B22">void</FONT></B> create(array(<B><FONT COLOR="#228B22">float</FONT></B>) v)
    {
        <B><FONT COLOR="#228B22">float</FONT></B> sum = `+(@v);
        N = <B><FONT COLOR="#A020F0">sizeof</FONT></B>(v);
        mean = sum / N;

        foreach(v, <B><FONT COLOR="#228B22">float</FONT></B> i)
        {
            <B><FONT COLOR="#228B22">float</FONT></B> deviation = i - mean;
            average_deviation += abs(deviation);
            variance += pow(deviation, 2);
            skew += pow(deviation, 3);
            kurtosis += pow(deviation, 4);
        }

        average_deviation /= N;
        variance /= (N - 1);
        standard_deviation = sqrt(variance);

        <B><FONT COLOR="#A020F0">if</FONT></B> (variance)
        {
            skew /= (N * variance * standard_deviation);
            kurtosis = kurtosis/(N * variance * variance) - 3.0;
        }

        sort(v);
        <B><FONT COLOR="#228B22">int</FONT></B> mid = N/2;
        median = N % 2 ? v[mid] : (v[mid] + v[mid-1])/2;
    }
};

<B><FONT COLOR="#228B22">int</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B>()
{
    array input = Stdio.stdin.read()/<B><FONT COLOR="#BC8F8F">&quot;\n&quot;</FONT></B>;
    Moments m=Moments( (array(<B><FONT COLOR="#228B22">float</FONT></B>)) input[..<B><FONT COLOR="#A020F0">sizeof</FONT></B>(input)-2] );

    write(<B><FONT COLOR="#BC8F8F">&quot;n:                  %d\n&quot;</FONT></B>, m-&gt;N);
    write(<B><FONT COLOR="#BC8F8F">&quot;median:             %.6f\n&quot;</FONT></B>, m-&gt;median);
    write(<B><FONT COLOR="#BC8F8F">&quot;mean:               %.6f\n&quot;</FONT></B>, m-&gt;mean);
    write(<B><FONT COLOR="#BC8F8F">&quot;average_deviation:  %.6f\n&quot;</FONT></B>, m-&gt;average_deviation);
    write(<B><FONT COLOR="#BC8F8F">&quot;standard_deviation: %.6f\n&quot;</FONT></B>, m-&gt;standard_deviation);
    write(<B><FONT COLOR="#BC8F8F">&quot;variance:           %.6f\n&quot;</FONT></B>, m-&gt;variance);
    write(<B><FONT COLOR="#BC8F8F">&quot;skew:               %.6f\n&quot;</FONT></B>, m-&gt;skew);
    write(<B><FONT COLOR="#BC8F8F">&quot;kurtosis:           %.6f\n&quot;</FONT></B>, m-&gt;kurtosis);
}</pre></td></tr></table>
