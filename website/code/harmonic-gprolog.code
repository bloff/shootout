<span class="com">/* The Great Computer Language Shootout
   http://shootout.alioth.debian.org/

   contributed by isykes 20050604
   modified by â&Agrave;¦

compile with: gplc --global-size 175000 --min-size harmonic.pro
	for n&lt;=10000000	*/</span>

<span class="sym">:-</span>initialization<span class="sym">(</span>run<span class="sym">)</span>.

	run<span class="sym">:-</span>	get_N<span class="sym">(</span>Nth_val<span class="sym">),
</span>		harmonic<span class="sym">(</span>Nth_val<span class="sym">,</span><span class="num">0</span><span class="sym">),!</span>.
	run.

		get_N<span class="sym">(</span>Nth_val<span class="sym">):-</span> argument_list<span class="sym">([</span>Input<span class="sym">]),
</span>				number_atom<span class="sym">(</span>Nth_val<span class="sym">,</span>Input<span class="sym">),
</span>				<span class="kwb">integer</span><span class="sym">(</span>Nth_val<span class="sym">),
</span>				Nth_val <span class="sym">&gt;</span> <span class="num">0</span><span class="sym">,!</span>.
		get_N<span class="sym">(</span>_<span class="sym">):-</span> <span class="kwb">write</span><span class="sym">(</span><span class="str">'Problem with argument!</span><span class="esc">\n</span><span class="str">'</span><span class="sym">),</span><span class="kwa">fail</span>.

		harmonic<span class="sym">(</span><span class="num">0</span><span class="sym">,</span>Sigma<span class="sym">):-</span> <span class="kwb">write</span><span class="sym">(</span>Sigma<span class="sym">),</span><span class="kwa">nl</span>.
		harmonic<span class="sym">(</span>Old_val<span class="sym">,</span>Old_Sigma<span class="sym">):-
</span>			New_Sigma <span class="kwa">is</span> Old_Sigma <span class="sym">+ (</span><span class="num">1</span> <span class="sym">/</span> Old_val<span class="sym">),
</span>			New_val <span class="kwa">is</span> dec<span class="sym">(</span>Old_val<span class="sym">),!,
</span>			harmonic<span class="sym">(</span>New_val<span class="sym">,</span>New_Sigma<span class="sym">)</span>.
