<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/python
</FONT></I><I><FONT COLOR="#B22222"># $Id: wordfreq-psyco.code,v 1.1 2004-11-02 08:53:35 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://shootout.alioth.debian.org/
</FONT></I><I><FONT COLOR="#B22222">#
</FONT></I><I><FONT COLOR="#B22222"># adapted from Bill Lear's original python word frequency counter
</FONT></I><I><FONT COLOR="#B22222">#
</FONT></I><I><FONT COLOR="#B22222"># Joel Rosdahl suggested using translate table to speed up
</FONT></I><I><FONT COLOR="#B22222"># word splitting.  That change alone sped this program up by
</FONT></I><I><FONT COLOR="#B22222"># at least a factor of 3.
</FONT></I><I><FONT COLOR="#B22222">#
</FONT></I><I><FONT COLOR="#B22222"># with further speedups from Mark Baker
</FONT></I>
<B><FONT COLOR="#A020F0">import</FONT></B> sys, psyco
psyco.full()

<B><FONT COLOR="#A020F0">def</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B>():
    count = {}
    i_r = map(chr, range(256))

    trans = [<B><FONT COLOR="#BC8F8F">' '</FONT></B>] * 256
    o_a, o_z = ord(<B><FONT COLOR="#BC8F8F">'a'</FONT></B>), (ord(<B><FONT COLOR="#BC8F8F">'z'</FONT></B>)+1)
    trans[ord(<B><FONT COLOR="#BC8F8F">'A'</FONT></B>):(ord(<B><FONT COLOR="#BC8F8F">'Z'</FONT></B>)+1)] = i_r[o_a:o_z]
    trans[o_a:o_z] = i_r[o_a:o_z]
    trans = <B><FONT COLOR="#BC8F8F">''</FONT></B>.join(trans)

    rl = sys.stdin.readlines

    lines = rl(4095)
    <B><FONT COLOR="#A020F0">while</FONT></B> lines:
        <B><FONT COLOR="#A020F0">for</FONT></B> line <B><FONT COLOR="#A020F0">in</FONT></B> lines:
            <B><FONT COLOR="#A020F0">for</FONT></B> word <B><FONT COLOR="#A020F0">in</FONT></B> line.translate(trans).split():
                <B><FONT COLOR="#A020F0">try</FONT></B>:
                    count[word] += 1
                <B><FONT COLOR="#A020F0">except</FONT></B> KeyError:
                    count[word] = 1
        lines = rl(4095)

    l = zip(count.values(), count.keys())
    l.sort()
    l.reverse()

    <B><FONT COLOR="#A020F0">print</FONT></B> <B><FONT COLOR="#BC8F8F">'\n'</FONT></B>.join([<B><FONT COLOR="#BC8F8F">&quot;%7s %s&quot;</FONT></B> % (count, word) <B><FONT COLOR="#A020F0">for</FONT></B> (count, word) <B><FONT COLOR="#A020F0">in</FONT></B> l])

main()</pre></td></tr></table>
