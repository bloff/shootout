<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<B><FONT COLOR="#BC8F8F">&quot;  The Great Computer Language Shootout
   contributed by Isaac Gouy

   To run: gst -QI /usr/local/share/smalltalk/gst.im wc.st &lt; input.txt
&quot;</FONT></B>

| newline space tab nl nw nc insideWord stream ch |
newline  := Character nl.
space := Character space.
tab := Character tab.

nl := nw := nc := 0.
insideWord := false.
stream := FileStream stdin bufferSize: 4096.

[(ch := stream <B><FONT COLOR="#A020F0">next</FONT></B>) notNil] whileTrue: [
   nc := nc + 1.
   ch = newline ifTrue: [nl := nl + 1].
   (ch = space <B><FONT COLOR="#A020F0">or</FONT></B>: [ch = newline <B><FONT COLOR="#A020F0">or</FONT></B>: [ch = tab]])
      ifTrue: [insideWord := false]
      ifFalse: [
         insideWord ifFalse: [
            insideWord := true. 
            nw := nw + 1
         ].
      ].
].      

Transcript 
   show: nl displayString; space;
   show: nw displayString; space;
   show: nc displayString; nl !</pre></td></tr></table>
