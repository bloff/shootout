<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">%% The Great Computer Language Shootout
</FONT></I><I><FONT COLOR="#B22222">%% contributed by Bengt Kleberg (Erlang Guru)
</FONT></I><I><FONT COLOR="#B22222">%%
</FONT></I><I><FONT COLOR="#B22222">%% http://shootout.alioth.debian.org/
</FONT></I><I><FONT COLOR="#B22222">%%
</FONT></I><I><FONT COLOR="#B22222">%% Usage: start from command line with
</FONT></I><I><FONT COLOR="#B22222">%%     erlc moments.erl
</FONT></I><I><FONT COLOR="#B22222">%%     erl -noinput -s moments main &lt; InputFile
</FONT></I>
<B><FONT COLOR="#5F9EA0">-module</FONT></B>(moments). 
<B><FONT COLOR="#5F9EA0">-export</FONT></B>([main/0, main/1]). 

<I><FONT COLOR="#B22222">%% ignore program argument
</FONT></I><B><FONT COLOR="#0000FF">main</FONT></B>() -&gt; main([<B><FONT COLOR="#BC8F8F">'1'</FONT></B>]).
<B><FONT COLOR="#0000FF">main</FONT></B>(<FONT COLOR="#B8860B">_Args</FONT>) -&gt;
    <FONT COLOR="#B8860B">Numbers</FONT> = input_floats(),
    <FONT COLOR="#B8860B">How_many</FONT> = erlang:<B><FONT COLOR="#A020F0">length</FONT></B>( <FONT COLOR="#B8860B">Numbers</FONT> ),
    <FONT COLOR="#B8860B">Median</FONT> = median( <FONT COLOR="#B8860B">Numbers</FONT>, <FONT COLOR="#B8860B">How_many</FONT> ),
    <FONT COLOR="#B8860B">Mean</FONT> = lists:sum( <FONT COLOR="#B8860B">Numbers</FONT> ) / <FONT COLOR="#B8860B">How_many</FONT>,
    {<FONT COLOR="#B8860B">Ad</FONT>, <FONT COLOR="#B8860B">Av</FONT>, <FONT COLOR="#B8860B">As</FONT>, <FONT COLOR="#B8860B">Ak</FONT>} = various_averages( <FONT COLOR="#B8860B">Numbers</FONT>, <FONT COLOR="#B8860B">Mean</FONT>),
    <FONT COLOR="#B8860B">Average_deviation</FONT> = <FONT COLOR="#B8860B">Ad</FONT> / <FONT COLOR="#B8860B">How_many</FONT>,
    <FONT COLOR="#B8860B">Variance</FONT> = <FONT COLOR="#B8860B">Av</FONT> / (<FONT COLOR="#B8860B">How_many</FONT> - 1),
    <FONT COLOR="#B8860B">Standard_deviation</FONT> = math:sqrt(<FONT COLOR="#B8860B">Variance</FONT>),
    <FONT COLOR="#B8860B">Skew</FONT> = skew(<FONT COLOR="#B8860B">How_many</FONT>, <FONT COLOR="#B8860B">As</FONT>, <FONT COLOR="#B8860B">Variance</FONT>, <FONT COLOR="#B8860B">Standard_deviation</FONT>),
    <FONT COLOR="#B8860B">Kurtosis</FONT> = kurtosis(<FONT COLOR="#B8860B">How_many</FONT>, <FONT COLOR="#B8860B">Ak</FONT>, <FONT COLOR="#B8860B">Variance</FONT>),
    print(<FONT COLOR="#B8860B">How_many</FONT>, <FONT COLOR="#B8860B">Median</FONT>, <FONT COLOR="#B8860B">Mean</FONT>, <FONT COLOR="#B8860B">Average_deviation</FONT>, <FONT COLOR="#B8860B">Standard_deviation</FONT>,
    	<FONT COLOR="#B8860B">Variance</FONT>, <FONT COLOR="#B8860B">Skew</FONT>, <FONT COLOR="#B8860B">Kurtosis</FONT>),
    <B><FONT COLOR="#A020F0">halt</FONT></B>().

<B><FONT COLOR="#0000FF">input_floats</FONT></B>() -&gt; <I><FONT COLOR="#B22222">% &quot;list of (double precision floating point) numbers&quot;? no,integers.
</FONT></I>    input_floats(io:fread(<B><FONT COLOR="#BC8F8F">''</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;~d&quot;</FONT></B>), []).
<B><FONT COLOR="#0000FF">input_floats</FONT></B>(eof, <FONT COLOR="#B8860B">Numbers</FONT>) -&gt;
    <FONT COLOR="#B8860B">Numbers</FONT>;
<B><FONT COLOR="#0000FF">input_floats</FONT></B>({ok, [<FONT COLOR="#B8860B">Float</FONT>]}, <FONT COLOR="#B8860B">Numbers</FONT>) -&gt;
    input_floats( io:fread(<B><FONT COLOR="#BC8F8F">''</FONT></B>, <B><FONT COLOR="#BC8F8F">&quot;~d&quot;</FONT></B>), [<FONT COLOR="#B8860B">Float</FONT>|<FONT COLOR="#B8860B">Numbers</FONT>] ).

<B><FONT COLOR="#0000FF">various_averages</FONT></B>( <FONT COLOR="#B8860B">Numbers</FONT>, <FONT COLOR="#B8860B">Mean</FONT> ) -&gt;
    <FONT COLOR="#B8860B">Fun</FONT> = <B><FONT COLOR="#A020F0">fun</FONT></B>( <FONT COLOR="#B8860B">Float</FONT>, {<FONT COLOR="#B8860B">Ad</FONT>, <FONT COLOR="#B8860B">Av</FONT>, <FONT COLOR="#B8860B">As</FONT>, <FONT COLOR="#B8860B">Ak</FONT>} ) -&gt;
            <FONT COLOR="#B8860B">D</FONT> = <FONT COLOR="#B8860B">Float</FONT> - <FONT COLOR="#B8860B">Mean</FONT>,
	    <FONT COLOR="#B8860B">D2</FONT> = <FONT COLOR="#B8860B">D</FONT> * <FONT COLOR="#B8860B">D</FONT>,
	    {<FONT COLOR="#B8860B">Ad</FONT> + erlang:<B><FONT COLOR="#A020F0">abs</FONT></B>(<FONT COLOR="#B8860B">D</FONT>), <FONT COLOR="#B8860B">Av</FONT> + <FONT COLOR="#B8860B">D2</FONT>, <FONT COLOR="#B8860B">As</FONT> + (<FONT COLOR="#B8860B">D2</FONT> * <FONT COLOR="#B8860B">D</FONT>), <FONT COLOR="#B8860B">Ak</FONT> + (<FONT COLOR="#B8860B">D2</FONT> * <FONT COLOR="#B8860B">D2</FONT>)}
	  <B><FONT COLOR="#A020F0">end</FONT></B>,
    lists:foldl( <FONT COLOR="#B8860B">Fun</FONT>, {0.0, 0.0, 0.0, 0.0}, <FONT COLOR="#B8860B">Numbers</FONT> ).

<B><FONT COLOR="#0000FF">median</FONT></B>(<FONT COLOR="#B8860B">L</FONT>, <FONT COLOR="#B8860B">N</FONT>) -&gt; medianS(lists:sort(<FONT COLOR="#B8860B">L</FONT>), <FONT COLOR="#B8860B">N</FONT>).

<B><FONT COLOR="#0000FF">medianS</FONT></B>(<FONT COLOR="#B8860B">L</FONT>, <FONT COLOR="#B8860B">N</FONT>) -&gt;
    <FONT COLOR="#B8860B">Mid</FONT> = (<FONT COLOR="#B8860B">N</FONT> div 2) + 1, <I><FONT COLOR="#B22222">% 1-based list access
</FONT></I>    <B><FONT COLOR="#A020F0">case</FONT></B> <FONT COLOR="#B8860B">N</FONT> rem 2 <B><FONT COLOR="#A020F0">of</FONT></B>
        0 -&gt; (lists:nth(<FONT COLOR="#B8860B">Mid</FONT>, <FONT COLOR="#B8860B">L</FONT>) + lists:nth(<FONT COLOR="#B8860B">Mid</FONT> - 1, <FONT COLOR="#B8860B">L</FONT>)) / 2;
        1 -&gt; lists:nth(<FONT COLOR="#B8860B">Mid</FONT>, <FONT COLOR="#B8860B">L</FONT>)
    <B><FONT COLOR="#A020F0">end</FONT></B>.

<B><FONT COLOR="#0000FF">skew</FONT></B>(<FONT COLOR="#B8860B">N</FONT>, <FONT COLOR="#B8860B">As</FONT>, <FONT COLOR="#B8860B">V</FONT>, <FONT COLOR="#B8860B">SD</FONT>) <B><FONT COLOR="#A020F0">when</FONT></B> <FONT COLOR="#B8860B">V</FONT> &gt; 0.0 -&gt; <FONT COLOR="#B8860B">As</FONT> / (<FONT COLOR="#B8860B">N</FONT> * <FONT COLOR="#B8860B">V</FONT> * <FONT COLOR="#B8860B">SD</FONT>);
<B><FONT COLOR="#0000FF">skew</FONT></B>(<FONT COLOR="#B8860B">_N</FONT>, <FONT COLOR="#B8860B">_As</FONT>, <FONT COLOR="#B8860B">_V</FONT>, <FONT COLOR="#B8860B">_SD</FONT>) -&gt; 0.

<B><FONT COLOR="#0000FF">kurtosis</FONT></B>(<FONT COLOR="#B8860B">N</FONT>, <FONT COLOR="#B8860B">Ak</FONT>, <FONT COLOR="#B8860B">V</FONT>) <B><FONT COLOR="#A020F0">when</FONT></B> <FONT COLOR="#B8860B">V</FONT> &gt; 0.0 -&gt; <FONT COLOR="#B8860B">Ak</FONT> / (<FONT COLOR="#B8860B">N</FONT> * <FONT COLOR="#B8860B">V</FONT> * <FONT COLOR="#B8860B">V</FONT>) - 3;
<B><FONT COLOR="#0000FF">kurtosis</FONT></B>(<FONT COLOR="#B8860B">_N</FONT>, <FONT COLOR="#B8860B">_Ak</FONT>, <FONT COLOR="#B8860B">_V</FONT>) -&gt; 0.

<B><FONT COLOR="#0000FF">print</FONT></B>(<FONT COLOR="#B8860B">How_many</FONT>, <FONT COLOR="#B8860B">Median</FONT>, <FONT COLOR="#B8860B">Mean</FONT>, <FONT COLOR="#B8860B">Average_deviation</FONT>, <FONT COLOR="#B8860B">Standard_deviation</FONT>,
        <FONT COLOR="#B8860B">Variance</FONT>, <FONT COLOR="#B8860B">Skew</FONT>, <FONT COLOR="#B8860B">Kurtosis</FONT>) -&gt;
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;n:                  ~w~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">How_many</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;median:             ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Median</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;mean:               ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Mean</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;average_deviation:  ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Average_deviation</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;standard_deviation: ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Standard_deviation</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;variance:           ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Variance</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;skew:               ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Skew</FONT>]), 
    io:fwrite(<B><FONT COLOR="#BC8F8F">&quot;kurtosis:           ~f~n&quot;</FONT></B>, [<FONT COLOR="#B8860B">Kurtosis</FONT>]). </pre></td></tr></table>
