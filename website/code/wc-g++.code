<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">// -*- mode: c++ -*-
</FONT></I><I><FONT COLOR="#B22222">// $Id: wc-g++.code,v 1.1 2004-11-02 08:53:31 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">// http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">// with help from Tom Widmer
</FONT></I>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;iostream&gt;</FONT></B>
#<B><FONT COLOR="#5F9EA0">include</FONT></B> <B><FONT COLOR="#BC8F8F">&lt;vector&gt;</FONT></B>

using namespace std;

<B><FONT COLOR="#228B22">enum</FONT></B> {
    OUT,			<I><FONT COLOR="#B22222">/* outside a word */</FONT></I>
    IN				<I><FONT COLOR="#B22222">/* inside a word */</FONT></I>
};

<B><FONT COLOR="#228B22">int</FONT></B>
<B><FONT COLOR="#0000FF">main</FONT></B>(<B><FONT COLOR="#228B22">int</FONT></B> argc, <B><FONT COLOR="#228B22">char</FONT></B> *argv[]) {
    <B><FONT COLOR="#228B22">char</FONT></B> c;
    <B><FONT COLOR="#228B22">int</FONT></B> nl, nw, nc, state;
    <B><FONT COLOR="#228B22">char</FONT></B> buff[4096];
    cin.rdbuf()-&gt;pubsetbuf(buff, 4096); <I><FONT COLOR="#B22222">// enable buffering
</FONT></I>
    state = OUT;
    nl = nw = nc = 0;
    <B><FONT COLOR="#228B22">int</FONT></B> intc;
    streambuf* sbuf = cin.rdbuf();
    <B><FONT COLOR="#A020F0">while</FONT></B> ((intc = sbuf-&gt;sbumpc()) != EOF) {
        c = (<B><FONT COLOR="#228B22">char</FONT></B>)intc;
	++nc;
	<B><FONT COLOR="#A020F0">if</FONT></B> (c == <B><FONT COLOR="#BC8F8F">'\n'</FONT></B>)
	    ++nl;
	<B><FONT COLOR="#A020F0">if</FONT></B> (c == <B><FONT COLOR="#BC8F8F">' '</FONT></B> || c == <B><FONT COLOR="#BC8F8F">'\n'</FONT></B> || c == <B><FONT COLOR="#BC8F8F">'\t'</FONT></B>)
	    state = OUT;
	<B><FONT COLOR="#A020F0">else</FONT></B> <B><FONT COLOR="#A020F0">if</FONT></B> (state == OUT) {
	    state = IN;
	    ++nw;
	}
    }
    cout &lt;&lt; nl &lt;&lt; <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> &lt;&lt; nw &lt;&lt; <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> &lt;&lt; nc &lt;&lt; endl;
}</pre></td></tr></table>
