<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/tclsh
</FONT></I><I><FONT COLOR="#B22222"># $Id: lists1-tcl.code,v 1.1 2004-11-02 08:52:36 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222"># based on code from Kristoffer Lawson and Tom Wilkason
</FONT></I>
<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">K</FONT></B> {<FONT COLOR="#B8860B">a b</FONT>} {<B><FONT COLOR="#A020F0">set</FONT></B> a}

<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">ldelete</FONT></B> {<FONT COLOR="#B8860B">listName index</FONT>} {
    <B><FONT COLOR="#A020F0">upvar</FONT></B> $<FONT COLOR="#B8860B">listName</FONT> <B><FONT COLOR="#A020F0">list</FONT></B>
    ;<I><FONT COLOR="#B22222"># Replace a deletion with null, much faster
</FONT></I>    <B><FONT COLOR="#A020F0">set</FONT></B> <B><FONT COLOR="#A020F0">list</FONT></B> [<B><FONT COLOR="#A020F0">lreplace</FONT></B> [K $<FONT COLOR="#B8860B">list</FONT> [<B><FONT COLOR="#A020F0">set</FONT></B> <B><FONT COLOR="#A020F0">list</FONT></B> {}]] $<FONT COLOR="#B8860B">index</FONT> $<FONT COLOR="#B8860B">index</FONT>]
}

<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">lreverse</FONT></B> {<FONT COLOR="#B8860B">_list</FONT>} {
    <B><FONT COLOR="#A020F0">upvar</FONT></B> $<FONT COLOR="#B8860B">_list</FONT> List
    <B><FONT COLOR="#A020F0">for</FONT></B> {<B><FONT COLOR="#A020F0">set</FONT></B> i [<B><FONT COLOR="#A020F0">expr</FONT></B> {[<B><FONT COLOR="#A020F0">llength</FONT></B> $<FONT COLOR="#B8860B">List</FONT>] - 1}]} {$<FONT COLOR="#B8860B">i</FONT> &gt;= 0} {<B><FONT COLOR="#A020F0">incr</FONT></B> i -1} {
	<B><FONT COLOR="#A020F0">lappend</FONT></B> Li1r [<B><FONT COLOR="#A020F0">lindex</FONT></B> $<FONT COLOR="#B8860B">List</FONT> $<FONT COLOR="#B8860B">i</FONT>]
    }
    <B><FONT COLOR="#A020F0">set</FONT></B> List $<FONT COLOR="#B8860B">Li1r</FONT>
    <B><FONT COLOR="#A020F0">unset</FONT></B> Li1r
}

<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">member</FONT></B> {<FONT COLOR="#B8860B">target _list</FONT>} {
    <B><FONT COLOR="#A020F0">upvar</FONT></B> $<FONT COLOR="#B8860B">_list</FONT> List
    <B><FONT COLOR="#A020F0">foreach</FONT></B> {item} $<FONT COLOR="#B8860B">List</FONT> {
	<B><FONT COLOR="#A020F0">if</FONT></B> {$<FONT COLOR="#B8860B">item</FONT> == $<FONT COLOR="#B8860B">target</FONT>} {
	    <B><FONT COLOR="#A020F0">puts</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;true&quot;</FONT></B>
	    <B><FONT COLOR="#A020F0">return</FONT></B>
	}
    }
    <B><FONT COLOR="#A020F0">puts</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;false&quot;</FONT></B>
}

<B><FONT COLOR="#A020F0">proc</FONT></B> <B><FONT COLOR="#0000FF">main</FONT></B> {<FONT COLOR="#B8860B">args</FONT>} {
    <B><FONT COLOR="#A020F0">global</FONT></B> argv
    <B><FONT COLOR="#A020F0">set</FONT></B> N [<B><FONT COLOR="#A020F0">lindex</FONT></B> $<FONT COLOR="#B8860B">argv</FONT> 0]
    <B><FONT COLOR="#A020F0">if</FONT></B> {$<FONT COLOR="#B8860B">N</FONT> &lt; 1} {
	<B><FONT COLOR="#A020F0">set</FONT></B> N 1
    }

    <I><FONT COLOR="#B22222"># create list (A) of integers from 1 through N
</FONT></I>    <B><FONT COLOR="#A020F0">for</FONT></B> {<B><FONT COLOR="#A020F0">set</FONT></B> i 1} {$<FONT COLOR="#B8860B">i</FONT> &lt;= $<FONT COLOR="#B8860B">N</FONT>} {<B><FONT COLOR="#A020F0">incr</FONT></B> i} {<B><FONT COLOR="#A020F0">lappend</FONT></B> A $<FONT COLOR="#B8860B">i</FONT>}

    <I><FONT COLOR="#B22222"># move each individual item from A to B, in a loop, reversing order
</FONT></I>    <B><FONT COLOR="#A020F0">foreach</FONT></B> {item} $<FONT COLOR="#B8860B">A</FONT> {
	<B><FONT COLOR="#A020F0">lappend</FONT></B> B [<B><FONT COLOR="#A020F0">lindex</FONT></B> $<FONT COLOR="#B8860B">A</FONT> end]
	ldelete A end
    }

    <I><FONT COLOR="#B22222"># print first 2 elements of B
</FONT></I>    <B><FONT COLOR="#A020F0">puts</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;[lindex $B 0] [lindex $B 1]&quot;</FONT></B>

    <I><FONT COLOR="#B22222"># reverse B (can be done in place)
</FONT></I>    lreverse B

    <I><FONT COLOR="#B22222"># is 0 a member of B?
</FONT></I>    member 0 B

    <I><FONT COLOR="#B22222"># is N a member of B?
</FONT></I>    member $<FONT COLOR="#B8860B">N</FONT> B

    <I><FONT COLOR="#B22222"># filter values from B to A that are less than N/2, preserving order
</FONT></I>    <B><FONT COLOR="#A020F0">set</FONT></B> mid [<B><FONT COLOR="#A020F0">expr</FONT></B> {$<FONT COLOR="#B8860B">N</FONT> / 2}]
    <B><FONT COLOR="#A020F0">foreach</FONT></B> {item} $<FONT COLOR="#B8860B">B</FONT> {
	<B><FONT COLOR="#A020F0">if</FONT></B> {$<FONT COLOR="#B8860B">item</FONT> &lt; $<FONT COLOR="#B8860B">mid</FONT>} {
	    <B><FONT COLOR="#A020F0">lappend</FONT></B> A $<FONT COLOR="#B8860B">item</FONT>
	}
    }

    <I><FONT COLOR="#B22222"># print first ten items of A
</FONT></I>    <B><FONT COLOR="#A020F0">puts</FONT></B> [<B><FONT COLOR="#A020F0">lrange</FONT></B> $<FONT COLOR="#B8860B">A</FONT> 0 9]

    <I><FONT COLOR="#B22222"># print sum of items in A that are less than 1000
</FONT></I>    <B><FONT COLOR="#A020F0">set</FONT></B> sum 0
    <B><FONT COLOR="#A020F0">foreach</FONT></B> {item} $<FONT COLOR="#B8860B">A</FONT> {
	<B><FONT COLOR="#A020F0">if</FONT></B> {$<FONT COLOR="#B8860B">item</FONT> &lt; 1000} {
	    <B><FONT COLOR="#A020F0">incr</FONT></B> sum $<FONT COLOR="#B8860B">item</FONT>
	}
    }
    <B><FONT COLOR="#A020F0">puts</FONT></B> $<FONT COLOR="#B8860B">sum</FONT>

    <I><FONT COLOR="#B22222"># append B to end of A
</FONT></I>    <B><FONT COLOR="#A020F0">foreach</FONT></B> {item} $<FONT COLOR="#B8860B">B</FONT> {
	<B><FONT COLOR="#A020F0">lappend</FONT></B> A $<FONT COLOR="#B8860B">item</FONT>
    }

    <I><FONT COLOR="#B22222"># print length and last element of A
</FONT></I>    <B><FONT COLOR="#A020F0">puts</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;[llength $A] [lindex $A end]&quot;</FONT></B>
}

main</pre></td></tr></table>
