<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">%%% $Id: sieve-oz.code,v 1.2 2004-11-08 08:15:52 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">%%% http://dada.perl.it/shootout/
</FONT></I>
<I><FONT COLOR="#B22222">%%% 
</FONT></I><I><FONT COLOR="#B22222">%%% contributed by Isaac Gouy
</FONT></I>
<I><FONT COLOR="#B22222">%%  Usage: start from command line with
</FONT></I><I><FONT COLOR="#B22222">%%     ozc -x sieve.oz -o sieve.oz.exe
</FONT></I><I><FONT COLOR="#B22222">%%     sieve.oz.exe 900
</FONT></I>
<B><FONT COLOR="#228B22">functor</FONT></B>
<B><FONT COLOR="#5F9EA0">import</FONT></B> System Application

<B><FONT COLOR="#A020F0">define</FONT></B> Args N Flags Start Stop <B><FONT COLOR="#A020F0">in</FONT></B>

    [Args] <B><FONT COLOR="#5F9EA0">=</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Application</FONT></I></B></FONT></B>.getArgs plain}
    N <B><FONT COLOR="#5F9EA0">=</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">String</FONT></I></B></FONT></B>.toInt Args}

    Start <B><FONT COLOR="#5F9EA0">=</FONT></B> 2
    Stop <B><FONT COLOR="#5F9EA0">=</FONT></B> 8192

    Flags <B><FONT COLOR="#5F9EA0">=</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">BitArray</FONT></I></B></FONT></B>.new Start Stop}
    <B><FONT COLOR="#A020F0">for</FONT></B> I <B><FONT COLOR="#A020F0">in</FONT></B> Start<B><FONT COLOR="#5F9EA0">..</FONT></B>Stop <B><FONT COLOR="#A020F0">do</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">BitArray</FONT></I></B></FONT></B>.set Flags I} <B><FONT COLOR="#A020F0">end</FONT></B>

    <B><FONT COLOR="#A020F0">for</FONT></B> I <B><FONT COLOR="#A020F0">in</FONT></B> 1<B><FONT COLOR="#5F9EA0">..</FONT></B>N <B><FONT COLOR="#A020F0">do</FONT></B>
           <B><FONT COLOR="#A020F0">for</FONT></B> J <B><FONT COLOR="#A020F0">in</FONT></B> Start<B><FONT COLOR="#5F9EA0">..</FONT></B>Stop <B><FONT COLOR="#A020F0">do</FONT></B>
            <B><FONT COLOR="#A020F0">if</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">BitArray</FONT></I></B></FONT></B>.test Flags J} <B><FONT COLOR="#A020F0">then</FONT></B>
                <B><FONT COLOR="#A020F0">for</FONT></B> K <B><FONT COLOR="#A020F0">in</FONT></B> J+J<B><FONT COLOR="#5F9EA0">..</FONT></B>Stop;J <B><FONT COLOR="#A020F0">do</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">BitArray</FONT></I></B></FONT></B>.clear Flags K} <B><FONT COLOR="#A020F0">end</FONT></B> 
            <B><FONT COLOR="#A020F0">end</FONT></B>
        <B><FONT COLOR="#A020F0">end</FONT></B>
    <B><FONT COLOR="#A020F0">end</FONT></B>

   {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.showInfo <B><FONT COLOR="#BC8F8F">&quot;Count: &quot;</FONT></B>#{<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">BitArray</FONT></I></B></FONT></B>.card Flags}}

   {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Application</FONT></I></B></FONT></B>.exit 0}
<B><FONT COLOR="#A020F0">end</FONT></B></pre></td></tr></table>
