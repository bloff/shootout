<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
#!/usr/bin/newlisp
#
# matrix - benchmark
# 
# Note, that newLISP's matrix functions work on lists not array type
#
# Contributed by Lutz Mueller

(set 'size 30)

(<B><FONT COLOR="#A020F0">define</FONT></B> (<B><FONT COLOR="#0000FF">mkmatrix</FONT></B> rows cols)
 	(map (fn (i) (sequence (+ (* i cols) 1)  (+ (* i cols) cols))) (sequence 0 (- rows 1))))
 	
 
(<B><FONT COLOR="#A020F0">define</FONT></B> (<B><FONT COLOR="#0000FF">main</FONT></B> n)
	(set 'm1 (mkmatrix size size))
	(set 'm2 m1)
	(dotimes (i n) 
		(set 'm3 (multiply m1 m2)))
	(println (nth 0 0 m3) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> (nth 2 3 m3) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> (nth 3 2 m3) <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B> (nth 4 4 m3)))
	

(set 'n (integer (nth 2 (main-args))))
	
(main n)

(exit)

 	</pre></td></tr></table>
