<span class="line">    1 </span>#<span class="sym">!/</span>usr<span class="sym">/</span>bin<span class="sym">/</span>mzscheme <span class="sym">-</span>r
<span class="line">    2 </span><span class="slc">;;; -*- mode: scheme -*-
</span><span class="line">    3 </span><span class="slc"></span><span class="slc">;;; $Id: procinst-mzscheme.code,v 1.4 2004-11-11 07:14:03 bfulgham Exp $
</span><span class="line">    4 </span><span class="slc"></span><span class="slc">;;; http://shootout.alioth.debian.org/
</span><span class="line">    5 </span><span class="slc"></span><span class="slc">;;; Provided by Bengt Kleberg
</span><span class="line">    6 </span><span class="slc"></span><span class="sym">(</span>define procinst <span class="sym">(</span><span class="kwa">lambda</span> <span class="sym">(</span>n<span class="sym">)
</span><span class="line">    7 </span><span class="sym">        (</span><span class="kwa">if</span> <span class="sym">(=</span> n <span class="num">0</span><span class="sym">)
</span><span class="line">    8 </span><span class="sym"></span>                <span class="str">'ok
</span><span class="line">    9 </span><span class="str">                (begin
</span><span class="line">   10 </span><span class="str">                        (thread (lambda () (thread-suspend (current-thread))))
</span><span class="line">   11 </span><span class="str">                        (procinst (- n 1))))))
</span><span class="line">   12 </span><span class="str">
</span><span class="line">   13 </span><span class="str">(define (main args)
</span><span class="line">   14 </span><span class="str">  (let ((n (if (= (vector-length args) 0)
</span><span class="line">   15 </span><span class="str">               1
</span><span class="line">   16 </span><span class="str">               (string-&gt;number (vector-ref args 0)))))
</span><span class="line">   17 </span><span class="str">        (procinst n)
</span><span class="line">   18 </span><span class="str">    (display n)
</span><span class="line">   19 </span><span class="str">        (newline)))
</span><span class="line">   20 </span><span class="str">
</span><span class="line">   21 </span><span class="str">(main (current-command-line-arguments))
</span><span class="line">   22 </span><span class="str"></span>
