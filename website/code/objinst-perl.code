<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/perl 
</FONT></I><I><FONT COLOR="#B22222"># $Id: objinst-perl.code,v 1.2 2004-11-08 08:15:18 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222"># http://www.bagley.org/~doug/shootout/
</FONT></I>
<B><FONT COLOR="#A020F0">use</FONT></B> strict;


<B><FONT COLOR="#A020F0">package</FONT></B> Toggle;

<B><FONT COLOR="#A020F0">sub</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> {
    <B><FONT COLOR="#A020F0">my</FONT></B>($class, $start_state) = @_;
    <B><FONT COLOR="#A020F0">bless</FONT></B>( { Bool =&gt; $start_state }, $class );
}

<B><FONT COLOR="#A020F0">sub</FONT></B> value {
    <B><FONT COLOR="#A020F0">my</FONT></B> $self = <B><FONT COLOR="#A020F0">shift</FONT></B>;
    <B><FONT COLOR="#A020F0">return</FONT></B>($self-&gt;{Bool});
}

<B><FONT COLOR="#A020F0">sub</FONT></B> activate {
    <B><FONT COLOR="#A020F0">my</FONT></B> $self = <B><FONT COLOR="#A020F0">shift</FONT></B>;
    $self-&gt;{Bool} ^= 1;
    <B><FONT COLOR="#A020F0">return</FONT></B>($self);
}


<B><FONT COLOR="#A020F0">package</FONT></B> NthToggle;
@NthToggle::ISA = <B><FONT COLOR="#A020F0">qw</FONT></B>(Toggle);

<B><FONT COLOR="#A020F0">sub</FONT></B> <B><FONT COLOR="#A020F0">new</FONT></B> {
    <B><FONT COLOR="#A020F0">my</FONT></B>($class, $start_state, $max_counter) = @_;
    <B><FONT COLOR="#A020F0">my</FONT></B> $self = $class-&gt;SUPER::<B><FONT COLOR="#A020F0">new</FONT></B>($start_state);
    $self-&gt;{CountMax} = $max_counter;
    $self-&gt;{Counter} = 0;
    <B><FONT COLOR="#A020F0">return</FONT></B>($self);
}

<B><FONT COLOR="#A020F0">sub</FONT></B> activate {
    <B><FONT COLOR="#A020F0">my</FONT></B> $self = <B><FONT COLOR="#A020F0">shift</FONT></B>;
    <B><FONT COLOR="#A020F0">if</FONT></B> (++$self-&gt;{Counter} &gt;= $self-&gt;{CountMax}) {
	$self-&gt;{Bool} ^= 1;
	$self-&gt;{Counter} = 0;
    }
    <B><FONT COLOR="#A020F0">return</FONT></B>($self);
}


<B><FONT COLOR="#A020F0">package</FONT></B> main;

<B><FONT COLOR="#A020F0">sub</FONT></B> main {
    <B><FONT COLOR="#A020F0">my</FONT></B> $NUM = ($ARGV[0] &gt; 0) ? $ARGV[0] : 1;

    <B><FONT COLOR="#A020F0">my</FONT></B> $toggle = Toggle-&gt;new(1);
    <B><FONT COLOR="#A020F0">for</FONT></B> (1..5) {
	<B><FONT COLOR="#A020F0">print</FONT></B> (($toggle-&gt;activate-&gt;value) ? <B><FONT COLOR="#BC8F8F">&quot;true\n&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;false\n&quot;</FONT></B>);
    }
    <B><FONT COLOR="#A020F0">for</FONT></B> (1..$NUM) {
	$toggle = Toggle-&gt;new(1);
    }

    <B><FONT COLOR="#A020F0">print</FONT></B> <B><FONT COLOR="#BC8F8F">&quot;\n&quot;</FONT></B>;

    <B><FONT COLOR="#A020F0">my</FONT></B> $ntoggle = NthToggle-&gt;new(1, 3);
    <B><FONT COLOR="#A020F0">for</FONT></B> (1..8) {
	<B><FONT COLOR="#A020F0">print</FONT></B> (($ntoggle-&gt;activate-&gt;value) ? <B><FONT COLOR="#BC8F8F">&quot;true\n&quot;</FONT></B> : <B><FONT COLOR="#BC8F8F">&quot;false\n&quot;</FONT></B>);
    }
    <B><FONT COLOR="#A020F0">for</FONT></B> (1..$NUM) {
	$ntoggle = NthToggle-&gt;new(1, 3);
    }
}

main();
</pre></td></tr></table>
