<span class="str">&quot;* The Computer Language Shootout</span>
<span class="str">    http://shootout.alioth.debian.org/</span>
<span class="str">    contributed by Isaac Gouy</span>
<span class="str">    modified by Eliot Miranda *&quot;</span><span class="sym">!</span>

<span class="sym">!</span>Tests class methodsFor<span class="sym">:</span> <span class="str">'benchmarking'</span><span class="sym">!</span>partialsums<span class="sym">:</span> n to<span class="sym">:</span> output   <span class="sym">|</span> a1 a2 a3 a4 a5 a6 a7 a8 a9 twothirds alt <span class="sym">|</span>   a1 <span class="sym">:=</span> a2 <span class="sym">:=</span> a3 <span class="sym">:=</span> a4 <span class="sym">:=</span> a5 <span class="sym">:=</span> a6 <span class="sym">:=</span> a7 <span class="sym">:=</span> a8 <span class="sym">:=</span> a9 <span class="sym">:=</span> <span class="num">0.0</span>d0.   twothirds <span class="sym">:=</span> <span class="num">2.0</span>d0<span class="sym">/</span><span class="num">3.0</span>d0.   alt <span class="sym">:= -</span><span class="num">1.0</span>d0.   <span class="num">1.0</span>d0 to<span class="sym">:</span> n <span class="kwa">do</span><span class="sym">: [:</span>k<span class="sym">| |</span> k2 k3 sk ck <span class="sym">|</span>      k2 <span class="sym">:=</span> k<span class="sym">*</span>k.      k3 <span class="sym">:=</span> k2<span class="sym">*</span>k.      sk <span class="sym">:=</span> k sin.      ck <span class="sym">:=</span> k cos.      alt <span class="sym">:= -</span><span class="num">1.0</span>d0 <span class="sym">*</span> alt.      a1 <span class="sym">:=</span> a1 <span class="sym">+ (</span>twothirds raisedTo<span class="sym">:</span> k <span class="sym">-</span> <span class="num">1.0</span>d0<span class="sym">)</span>.      a2 <span class="sym">:=</span> a2 <span class="sym">+ (</span>k raisedTo<span class="sym">: -</span><span class="num">0.5</span>d0<span class="sym">)</span>.      a3 <span class="sym">:=</span> a3 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k<span class="sym">*(</span>k<span class="sym">+</span><span class="num">1.0</span>d0<span class="sym">)))</span>.      a4 <span class="sym">:=</span> a4 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k3<span class="sym">*</span>sk<span class="sym">*</span>sk<span class="sym">))</span>.      a5 <span class="sym">:=</span> a5 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k3<span class="sym">*</span>ck<span class="sym">*</span>ck<span class="sym">))</span>.      a6 <span class="sym">:=</span> a6 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/</span>k<span class="sym">)</span>.      a7 <span class="sym">:=</span> a7 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/</span>k2<span class="sym">)</span>.      a8 <span class="sym">:=</span> a8 <span class="sym">+ (</span>alt<span class="sym">/</span>k<span class="sym">)</span>.      a9 <span class="sym">:=</span> a9 <span class="sym">+ (</span>alt<span class="sym">/(</span><span class="num">2.0</span>d0<span class="sym">*</span>k <span class="sym">-</span> <span class="num">1.0</span>d0<span class="sym">))]</span>.

   self print<span class="sym">:</span> a1 withName<span class="sym">:</span> <span class="str">'(2/3)^k'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a2 withName<span class="sym">:</span> <span class="str">'k^-0.5'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a3 withName<span class="sym">:</span> <span class="str">'1/k(k+1)'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a4 withName<span class="sym">:</span> <span class="str">'Flint Hills'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a5 withName<span class="sym">:</span> <span class="str">'Cookson Hills'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a6 withName<span class="sym">:</span> <span class="str">'Harmonic'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a7 withName<span class="sym">:</span> <span class="str">'Riemann Zeta'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a8 withName<span class="sym">:</span> <span class="str">'Alternating Harmonic'</span> to<span class="sym">:</span> output.
   self print<span class="sym">:</span> a9 withName<span class="sym">:</span> <span class="str">'Gregory'</span> to<span class="sym">:</span> output.   ^<span class="str">''</span><span class="sym">! !</span>

<span class="sym">!</span>Tests class methodsFor<span class="sym">:</span> <span class="str">'benchmarking'</span><span class="sym">!</span>
print<span class="sym">:</span> number withName<span class="sym">:</span> name to<span class="sym">:</span> output
   output print<span class="sym">:</span> number digits<span class="sym">:</span> <span class="num">9</span><span class="sym">;</span> tab<span class="sym">;</span> nextPutAll<span class="sym">:</span> name<span class="sym">;</span> nl<span class="sym">! !</span>

<span class="sym">!</span>Tests class methodsFor<span class="sym">:</span> <span class="str">'benchmark scripts'</span><span class="sym">!</span>partialsums   self partialsums<span class="sym">:</span> self arg asFloatD to<span class="sym">:</span> self stdout.   ^<span class="str">''</span><span class="sym">! !</span>

Tests partialsums<span class="sym">!</span>
