<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
;;; $Id: sieve-pop11.code,v 1.1 2004-11-02 08:53:26 bfulgham Exp $
;;; http:<I><FONT COLOR="#B22222">//shootout.alioth.debian.org
</FONT></I>vars n;

define constant procedure <B><FONT COLOR="#0000FF">get_args</FONT></B>();
   <B><FONT COLOR="#A020F0">if</FONT></B> null(poparglist) then 1 <B><FONT COLOR="#A020F0">else</FONT></B>
      strnumber( hd(poparglist) )
   endif
enddefine;

<B><FONT COLOR="#0000FF">get_args</FONT></B>() -&gt; n;

vars flags = initshortvec(8192 + 1);

vars count = 0;
vars i, j;
repeat n times
    0 -&gt; count;
    <B><FONT COLOR="#A020F0">for</FONT></B> i from 2 to 8192 <B><FONT COLOR="#A020F0">do</FONT></B>
        1 -&gt; subscrshortvec(i, flags)
    endfor;
    <B><FONT COLOR="#A020F0">for</FONT></B> i from 2 to 8192 <B><FONT COLOR="#A020F0">do</FONT></B>
        <B><FONT COLOR="#A020F0">if</FONT></B> subscrshortvec(i,flags) == 1 then
	    ;;; remove all multiples of prime: i
	    <B><FONT COLOR="#A020F0">for</FONT></B> j from (i + i) by i to 8192 <B><FONT COLOR="#A020F0">do</FONT></B>
	        0 -&gt; subscrshortvec(j, flags);
	    endfor;
	    count + 1 -&gt; count;
        endif;
    endfor;
endrepeat;

<B><FONT COLOR="#0000FF">format_print</FONT></B>('Count: ~D\n', [^count]);
</pre></td></tr></table>
