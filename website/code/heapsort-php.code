<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/php -f
</FONT></I>&lt;?php
/*
 $Id: heapsort-php.code,v 1.1 2004-11-02 08:52:32 bfulgham Exp $
 http://shootout.alioth.debian.org/
*/
define(<B><FONT COLOR="#BC8F8F">&quot;IM&quot;</FONT></B>, 139968);
define(<B><FONT COLOR="#BC8F8F">&quot;IA&quot;</FONT></B>, 3877);
define(<B><FONT COLOR="#BC8F8F">&quot;IC&quot;</FONT></B>, 29573);

$LAST = 42;
function gen_random ($n) {
    global $LAST;
    <B><FONT COLOR="#A020F0">return</FONT></B>( ($n * ($LAST = ($LAST * IA + IC) % IM)) / IM );
}

function heapsort ($n, &amp;$ra) {
    $l = ($n &gt;&gt; 1) + 1;
    $ir = $n;

    <B><FONT COLOR="#A020F0">while</FONT></B> (1) {
	<B><FONT COLOR="#A020F0">if</FONT></B> ($l &gt; 1) {
	    $rra = $ra[--$l];
	} <B><FONT COLOR="#A020F0">else</FONT></B> {
	    $rra = $ra[$ir];
	    $ra[$ir] = $ra[1];
	    <B><FONT COLOR="#A020F0">if</FONT></B> (--$ir == 1) {
		$ra[1] = $rra;
		<B><FONT COLOR="#A020F0">return</FONT></B>;
	    }
	}
	$i = $l;
	$j = $l &lt;&lt; 1;
	<B><FONT COLOR="#A020F0">while</FONT></B> ($j &lt;= $ir) {
	    <B><FONT COLOR="#A020F0">if</FONT></B> (($j &lt; $ir) &amp;&amp; ($ra[$j] &lt; $ra[$j+1])) {
		$j++;
	    }
	    <B><FONT COLOR="#A020F0">if</FONT></B> ($rra &lt; $ra[$j]) {
		$ra[$i] = $ra[$j];
		$j += ($i = $j);
	    } <B><FONT COLOR="#A020F0">else</FONT></B> {
		$j = $ir + 1;
	    }
	}
	$ra[$i] = $rra;
    }
}


$N = ($argc == 2) ? $argv[1] : 1;

<B><FONT COLOR="#A020F0">for</FONT></B> ($i=1; $i&lt;=$N; $i++) {
    $ary[$i] = gen_random(1);
}

/*
<B><FONT COLOR="#A020F0">for</FONT></B> ($i=0; $i&lt;$N; $i++) {
    <B><FONT COLOR="#A020F0">printf</FONT></B>(<B><FONT COLOR="#BC8F8F">&quot;%4d %.15f\n&quot;</FONT></B>, $i, $ary[$i]);
}
*/

heapsort($N, $ary);

<B><FONT COLOR="#A020F0">printf</FONT></B>(<B><FONT COLOR="#BC8F8F">&quot;%.10f\n&quot;</FONT></B>, $ary[$N]);
?&gt;</pre></td></tr></table>
