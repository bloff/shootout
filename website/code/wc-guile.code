<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
#!/usr/bin/guile -s
!#

<I><FONT COLOR="#B22222">;;; $Id: wc-guile.code,v 1.2 2004-11-08 08:15:54 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">;;; http://www.bagley.org/~doug/shootout/
</FONT></I><I><FONT COLOR="#B22222">;;; from Dale P. Smith
</FONT></I>
(<B><FONT COLOR="#A020F0">define</FONT></B> (<B><FONT COLOR="#0000FF">wc</FONT></B> iport)
  (<B><FONT COLOR="#A020F0">let</FONT></B> ((chars 0) (words 0) (lines 0) (inword 0) (x #f))
    (<B><FONT COLOR="#A020F0">let</FONT></B> loop ()
      (<B><FONT COLOR="#A020F0">set!</FONT></B> x (read-char iport))
      (<B><FONT COLOR="#A020F0">if</FONT></B> (eof-object? x)
	  (<B><FONT COLOR="#A020F0">begin</FONT></B> (display lines) (display <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>) (display words)
		 (display <B><FONT COLOR="#BC8F8F">&quot; &quot;</FONT></B>) (display chars) (newline))
	  (<B><FONT COLOR="#A020F0">begin</FONT></B>
	    (<B><FONT COLOR="#A020F0">set!</FONT></B> chars (+ 1 chars))
	    (<B><FONT COLOR="#A020F0">if</FONT></B> (not (char-whitespace? x))
		(<B><FONT COLOR="#A020F0">set!</FONT></B> inword 1)
		(<B><FONT COLOR="#A020F0">begin</FONT></B>
		  (<B><FONT COLOR="#A020F0">set!</FONT></B> words (+ words inword))
		  (<B><FONT COLOR="#A020F0">set!</FONT></B> inword 0)
		  (<B><FONT COLOR="#A020F0">if</FONT></B> (char=? x #\newline)
		      (<B><FONT COLOR="#A020F0">set!</FONT></B> lines (+ 1 lines)))))
	    (loop))))))

(wc (current-input-port))</pre></td></tr></table>
