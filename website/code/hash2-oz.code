<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">%%% $Id: hash2-oz.code,v 1.1 2004-11-02 08:52:31 bfulgham Exp $
</FONT></I><I><FONT COLOR="#B22222">%%% http://dada.perl.it/shootout/
</FONT></I><I><FONT COLOR="#B22222">%%% 
</FONT></I><I><FONT COLOR="#B22222">%%% contributed by Isaac Gouy
</FONT></I>
<I><FONT COLOR="#B22222">%%  Usage: start from command line with
</FONT></I><I><FONT COLOR="#B22222">%%     ozc -x hash2.oz -o hash2.oz.exe
</FONT></I><I><FONT COLOR="#B22222">%%     hash2.oz.exe 150
</FONT></I>
<B><FONT COLOR="#228B22">functor</FONT></B>
<B><FONT COLOR="#5F9EA0">import</FONT></B> System Application

<B><FONT COLOR="#A020F0">define</FONT></B>

<B><FONT COLOR="#A020F0">proc</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">InitHash</FONT></I></B></FONT></B> H}
   <B><FONT COLOR="#A020F0">for</FONT></B> I <B><FONT COLOR="#A020F0">in</FONT></B> 0<B><FONT COLOR="#5F9EA0">..</FONT></B>9999 <B><FONT COLOR="#A020F0">do</FONT></B> 
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.put H
         {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">String</FONT></I></B></FONT></B>.toAtom {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">List</FONT></I></B></FONT></B>.append <B><FONT COLOR="#BC8F8F">&quot;foo_&quot;</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">IntToString</FONT></I></B></FONT></B> I}}} I} 
   <B><FONT COLOR="#A020F0">end</FONT></B>
<B><FONT COLOR="#A020F0">end</FONT></B>

<B><FONT COLOR="#A020F0">proc</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">AddValues</FONT></I></B></FONT></B> L H}
   <B><FONT COLOR="#5F9EA0">local</FONT></B> Key Value Tail V <B><FONT COLOR="#A020F0">in</FONT></B>
      <B><FONT COLOR="#A020F0">if</FONT></B> L \<B><FONT COLOR="#5F9EA0">=</FONT></B> <B><FONT COLOR="#228B22">nil</FONT></B> <B><FONT COLOR="#A020F0">then</FONT></B>
         (Key#Value<B><FONT COLOR="#5F9EA0">|</FONT></B>Tail) <B><FONT COLOR="#5F9EA0">=</FONT></B> L
         {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.condGet H Key <B><FONT COLOR="#228B22">nil</FONT></B> V}
         <B><FONT COLOR="#A020F0">if</FONT></B> V <B><FONT COLOR="#5F9EA0">==</FONT></B> <B><FONT COLOR="#228B22">nil</FONT></B> <B><FONT COLOR="#A020F0">then</FONT></B>
            {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.put H Key Value}
         <B><FONT COLOR="#A020F0">else</FONT></B>
            {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.put H Key Value+V}
         <B><FONT COLOR="#A020F0">end</FONT></B>
         {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">AddValues</FONT></I></B></FONT></B> Tail H}
      <B><FONT COLOR="#A020F0">end</FONT></B>
   <B><FONT COLOR="#A020F0">end</FONT></B>
<B><FONT COLOR="#A020F0">end</FONT></B>

<B><FONT COLOR="#A020F0">in</FONT></B> 
   <B><FONT COLOR="#5F9EA0">local</FONT></B> Args N H1 H2 <B><FONT COLOR="#A020F0">in</FONT></B>
      [Args] <B><FONT COLOR="#5F9EA0">=</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Application</FONT></I></B></FONT></B>.getArgs plain}
      N <B><FONT COLOR="#5F9EA0">=</FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">String</FONT></I></B></FONT></B>.toInt Args}

      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">NewDictionary</FONT></I></B></FONT></B> H1}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">NewDictionary</FONT></I></B></FONT></B> H2}

      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">InitHash</FONT></I></B></FONT></B> H1}
      <B><FONT COLOR="#A020F0">for</FONT></B> I <B><FONT COLOR="#A020F0">in</FONT></B> 1<B><FONT COLOR="#5F9EA0">..</FONT></B>N <B><FONT COLOR="#A020F0">do</FONT></B> 
         {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">AddValues</FONT></I></B></FONT></B> {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.entries H1} H2} <B><FONT COLOR="#A020F0">end</FONT></B>

      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.get H1 'foo_1'}}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo <B><FONT COLOR="#BC8F8F">' '</FONT></B>}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.get H1 'foo_9999'}}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo <B><FONT COLOR="#BC8F8F">' '</FONT></B>}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.get H2 'foo_1'}}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo <B><FONT COLOR="#BC8F8F">' '</FONT></B>}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Dictionary</FONT></I></B></FONT></B>.get H2 'foo_9999'}}
      {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">System</FONT></I></B></FONT></B>.printInfo <B><FONT COLOR="#BC8F8F">&quot;\n&quot;</FONT></B>}
   <B><FONT COLOR="#A020F0">end</FONT></B>
   {<B><FONT COLOR="#0000FF"><B><I><FONT COLOR="#000000">Application</FONT></I></B></FONT></B>.exit 0}
<B><FONT COLOR="#A020F0">end</FONT></B></pre></td></tr></table>
