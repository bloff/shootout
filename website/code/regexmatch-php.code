<table width="100%" border="0" cellpadding="5" cellspacing="0"><tr><td bgcolor="#FFFFFF"><pre>
<I><FONT COLOR="#B22222">#!/usr/bin/php -f 
</FONT></I>&lt;?
/* The Great Computer Language Shootout
   http://shootout.alioth.debian.org/
   contributed by Isaac Gouy 

   php -<B><FONT COLOR="#A020F0">q</FONT></B> regexmatch.php 12000 &lt; input.txt
*/ 


$regex = <B><FONT COLOR="#BC8F8F">&quot;/&quot;</FONT></B> 
         .<B><FONT COLOR="#BC8F8F">&quot;(?:^|[^\d\(])&quot;</FONT></B> 
         .<B><FONT COLOR="#BC8F8F">&quot;(?:\((\d\d\d)\)|(\d\d\d))&quot;</FONT></B>    
         .<B><FONT COLOR="#BC8F8F">&quot;[ ]&quot;</FONT></B> 
         .<B><FONT COLOR="#BC8F8F">&quot;(\d\d\d)&quot;</FONT></B>
         .<B><FONT COLOR="#BC8F8F">&quot;[ -]&quot;</FONT></B>
         .<B><FONT COLOR="#BC8F8F">&quot;(\d\d\d\d)&quot;</FONT></B>
         .<B><FONT COLOR="#BC8F8F">&quot;\D&quot;</FONT></B> 
         .<B><FONT COLOR="#BC8F8F">&quot;/&quot;</FONT></B>;


$n = ($argc == 2) ? $argv[1] : 1;

$phoneNumbers = file(<B><FONT COLOR="#BC8F8F">&quot;php://stdin&quot;</FONT></B>);
$last = sizeof($phoneNumbers)-1;
$count = 0;

<B><FONT COLOR="#A020F0">while</FONT></B> ($n--)
   <B><FONT COLOR="#A020F0">for</FONT></B> ($i=0; $i&lt;$last; $i++){
      preg_match($regex, $phoneNumbers[$i], $match);
      <B><FONT COLOR="#A020F0">if</FONT></B> (($n == 0) &amp;&amp; $match){ 
         $m = $match[1] ? $match[1] : $match[2];
         <B><FONT COLOR="#A020F0">printf</FONT></B>(<B><FONT COLOR="#BC8F8F">&quot;%d: (%s) %s-%s\n&quot;</FONT></B>, ++$count, $m, $match[3], $match[4]);
         }
   }

?&gt;</pre></td></tr></table>
