<span class="slc">#!/usr/bin/python
</span><span class="slc"># $Id: moments-python.code,v 1.7 2004-12-05 01:58:28 bfulgham Exp $
</span><span class="slc"># http://shootout.alioth.debian.org/
</span><span class="slc">#
</span><span class="slc"># Updated by Antoine Pitrou
</span><span class="slc"># 1.  Simple loops are often faster than 'reduce'.
</span><span class="slc"># 2.  'abs' function is referenced by a local variable.  (Local variables
</span><span class="slc">#     are optimized by the Python interpreter.
</span><span class="slc"># 3.  Some loop invariants are lifted to tighten up the code.
</span>
<span class="kwc">import</span> sys<span class="sym">,</span> string<span class="sym">,</span> math<span class="sym">,</span> operator

<span class="kwb">def</span> main<span class="sym">():
</span>	sum <span class="sym">=</span> <span class="num">0
</span>	nums <span class="sym">= []
</span>	_abs <span class="sym">=</span> <span class="kwc">abs

</span>	nums <span class="sym">= [</span><span class="kwa">float</span><span class="sym">(</span>s<span class="sym">)</span> <span class="kwb">for</span> s <span class="kwb">in</span> sys<span class="sym">.</span>stdin<span class="sym">.</span>xreadlines<span class="sym">()]
</span>	<span class="kwb">for</span> num <span class="kwb">in</span> nums<span class="sym">:
</span>		sum <span class="sym">+=</span> num
<span class="slc">#	sum = reduce(operator.add, nums)
</span>
	n <span class="sym">=</span> <span class="kwa">len</span><span class="sym">(</span>nums<span class="sym">)
</span>	mean <span class="sym">=</span> sum<span class="sym">/</span>n
	average_deviation <span class="sym">=</span> <span class="num">0
</span>	standard_deviation <span class="sym">=</span> <span class="num">0
</span>	variance <span class="sym">=</span> <span class="num">0
</span>	skew <span class="sym">=</span> <span class="num">0
</span>	kurtosis <span class="sym">=</span> <span class="num">0

</span>	<span class="kwb">for</span> num <span class="kwb">in</span> nums<span class="sym">:
</span>		deviation <span class="sym">=</span> num <span class="sym">-</span> mean
		d2 <span class="sym">=</span> deviation<span class="sym">**</span><span class="num">2
</span>		average_deviation <span class="sym">+=</span> _abs<span class="sym">(</span>deviation<span class="sym">)
</span>		variance <span class="sym">+=</span> d2
		skew <span class="sym">+=</span> deviation<span class="sym">*</span>d2
		kurtosis <span class="sym">+=</span> d2<span class="sym">**</span><span class="num">2

</span>	average_deviation <span class="sym">/=</span> n
	variance <span class="sym">/= (</span>n <span class="num">- 1</span><span class="sym">)
</span>	standard_deviation <span class="sym">=</span> math<span class="sym">.</span>sqrt<span class="sym">(</span>variance<span class="sym">)

</span>	<span class="kwb">if</span> variance <span class="sym">&gt;</span> <span class="num">0.0</span><span class="sym">:
</span>		skew <span class="sym">/= (</span>n <span class="sym">*</span> variance <span class="sym">*</span> standard_deviation<span class="sym">)
</span>		kurtosis <span class="sym">=</span> kurtosis<span class="sym">/(</span>n <span class="sym">*</span> variance <span class="sym">*</span> variance<span class="sym">) -</span> <span class="num">3.0

</span>	nums<span class="sym">.</span>sort<span class="sym">()
</span>	mid <span class="sym">=</span> n <span class="sym">/</span> <span class="num">2

</span>	<span class="kwb">if</span> <span class="sym">(</span>n <span class="sym">%</span> <span class="num">2</span><span class="sym">) ==</span> <span class="num">0</span><span class="sym">:
</span>		median <span class="sym">= (</span>nums<span class="sym">[</span>mid<span class="sym">] +</span> nums<span class="sym">[</span>mid<span class="num">-1</span><span class="sym">])/</span><span class="num">2
</span>	<span class="kwb">else</span><span class="sym">:
</span>		median <span class="sym">=</span> nums<span class="sym">[</span>mid<span class="sym">]

</span>	<span class="kwb">print</span> <span class="str">&quot;n:                  %d&quot;</span> <span class="sym">%</span> n
	<span class="kwb">print</span> <span class="str">&quot;median:             %f&quot;</span> <span class="sym">%</span> median
	<span class="kwb">print</span> <span class="str">&quot;mean:               %f&quot;</span> <span class="sym">%</span> mean
	<span class="kwb">print</span> <span class="str">&quot;average_deviation:  %f&quot;</span> <span class="sym">%</span> average_deviation
	<span class="kwb">print</span> <span class="str">&quot;standard_deviation: %f&quot;</span> <span class="sym">%</span> standard_deviation
	<span class="kwb">print</span> <span class="str">&quot;variance:           %f&quot;</span> <span class="sym">%</span> variance
	<span class="kwb">print</span> <span class="str">&quot;skew:               %f&quot;</span> <span class="sym">%</span> skew
	<span class="kwb">print</span> <span class="str">&quot;kurtosis:           %f&quot;</span> <span class="sym">%</span> kurtosis

main<span class="sym">()
</span>
