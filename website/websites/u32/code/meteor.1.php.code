<span class="hl sym">&lt;</span>? <span class="hl com">/* The Computer Language Shootout</span>
<span class="hl com">   http://shootout.alioth.debian.org/</span>
<span class="hl com"></span>
<span class="hl com">   contributed by Isaac Gouy (PHP novice)</span>
<span class="hl com">*/</span>

<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;NW&quot;</span><span class="hl sym">,</span> <span class="hl num">0</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;NE&quot;</span><span class="hl sym">,</span> <span class="hl num">1</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;W&quot;</span><span class="hl sym">,</span> <span class="hl num">2</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;E&quot;</span><span class="hl sym">,</span> <span class="hl num">3</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;SW&quot;</span><span class="hl sym">,</span> <span class="hl num">4</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;SE&quot;</span><span class="hl sym">,</span> <span class="hl num">5</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;SIDES&quot;</span><span class="hl sym">,</span> <span class="hl num">6</span><span class="hl sym">);</span>

<span class="hl kwa">class</span> Cell <span class="hl sym">{</span>
   var <span class="hl kwc">$marked</span> <span class="hl sym">=</span> false<span class="hl sym">;</span>
   var <span class="hl kwc">$next</span><span class="hl sym">;</span>
   <span class="hl kwa">function</span> <span class="hl kwd">Cell</span><span class="hl sym">() {</span> <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>SIDES<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">] =</span> null<span class="hl sym">; }</span>
   <span class="hl kwa">function</span> <span class="hl kwd">mark</span><span class="hl sym">(){</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>marked <span class="hl sym">=</span> true<span class="hl sym">; }</span>
   <span class="hl kwa">function</span> <span class="hl kwd">unmark</span><span class="hl sym">(){</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>marked <span class="hl sym">=</span> false<span class="hl sym">; }</span>
<span class="hl sym">}</span>

<span class="hl kwa">class</span> BoardCell <span class="hl kwa">extends</span> Cell <span class="hl sym">{</span>
   var <span class="hl kwc">$number</span><span class="hl sym">;</span>
   var <span class="hl kwc">$piece</span><span class="hl sym">;</span>

   <span class="hl kwa">function</span> <span class="hl kwd">BoardCell</span><span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">) {</span>
      Cell<span class="hl sym">::</span><span class="hl kwd">Cell</span><span class="hl sym">();</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>number <span class="hl sym">=</span> <span class="hl kwc">$i</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">isEmpty</span><span class="hl sym">() {</span> <span class="hl kwa">return</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>piece <span class="hl sym">==</span> null<span class="hl sym">; }</span>
   <span class="hl kwa">function</span> <span class="hl kwd">setEmpty</span><span class="hl sym">() {</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>piece <span class="hl sym">=</span> null<span class="hl sym">; }</span>

   <span class="hl kwa">function</span> <span class="hl kwd">contiguousEmptyCells</span><span class="hl sym">() {</span>
      <span class="hl kwa">if</span> <span class="hl sym">((!</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>marked<span class="hl sym">) &amp;&amp; (</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">isEmpty</span><span class="hl sym">())){</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">mark</span><span class="hl sym">();</span>
         <span class="hl kwc">$count</span> <span class="hl sym">=</span> <span class="hl num">1</span><span class="hl sym">;</span>
         <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span> <span class="hl sym">=</span> <span class="hl num">0</span> <span class="hl sym">;</span> <span class="hl kwc">$i</span> <span class="hl sym">&lt;</span> SIDES <span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span>
            <span class="hl kwc">$neighbour</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">];</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$neighbour</span> <span class="hl sym">!=</span> null <span class="hl sym">&amp;&amp;</span> <span class="hl kwc">$neighbour</span><span class="hl sym">-&gt;</span><span class="hl kwd">isEmpty</span><span class="hl sym">())</span>
               <span class="hl kwc">$count</span> <span class="hl sym">+=</span> <span class="hl kwc">$neighbour</span><span class="hl sym">-&gt;</span><span class="hl kwd">contiguousEmptyCells</span><span class="hl sym">();</span>
         <span class="hl sym">}</span>
      <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
         <span class="hl kwc">$count</span> <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
      <span class="hl sym">}</span>
      <span class="hl kwa">return</span> <span class="hl kwc">$count</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>
<span class="hl sym">}</span>


<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;BOARD_COLS&quot;</span><span class="hl sym">,</span> <span class="hl num">5</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;BOARD_ROWS&quot;</span><span class="hl sym">,</span> <span class="hl num">10</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;BOARD_SIZE&quot;</span><span class="hl sym">,</span> BOARD_COLS <span class="hl sym">*</span> BOARD_ROWS<span class="hl sym">);</span>

<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;PIECES&quot;</span><span class="hl sym">,</span> <span class="hl num">10</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;PIECE_SIZE&quot;</span><span class="hl sym">,</span> <span class="hl num">5</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;PIECE_ROTATIONS&quot;</span><span class="hl sym">,</span> SIDES<span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;PIECE_FLIPS&quot;</span><span class="hl sym">,</span> <span class="hl num">2</span><span class="hl sym">);</span>
<span class="hl kwa">define</span><span class="hl sym">(</span><span class="hl str">&quot;PIECE_ORIENTATIONS&quot;</span><span class="hl sym">,</span> PIECE_ROTATIONS <span class="hl sym">*</span> PIECE_FLIPS<span class="hl sym">);</span>

<span class="hl kwa">class</span> Board <span class="hl sym">{</span>
   var <span class="hl kwc">$cells</span><span class="hl sym">;</span>
   var <span class="hl kwc">$cellsPieceWillFill</span><span class="hl sym">;</span>
   var <span class="hl kwc">$cellCount</span> <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
   var <span class="hl kwc">$cache</span><span class="hl sym">;</span>
   var <span class="hl kwc">$noFit</span> <span class="hl sym">=</span> <span class="hl kwa">array</span><span class="hl sym">();</span>

   <span class="hl kwa">function</span> <span class="hl kwd">Board</span><span class="hl sym">(){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">] =</span> new <span class="hl kwd">BoardCell</span><span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">);</span>
      <span class="hl kwc">$m</span> <span class="hl sym">=</span> <span class="hl kwa">floor</span><span class="hl sym">(</span>BOARD_SIZE <span class="hl sym">/</span> BOARD_COLS<span class="hl sym">) -</span> <span class="hl num">1</span><span class="hl sym">;</span>

      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span>
         <span class="hl kwc">$row</span> <span class="hl sym">=</span> <span class="hl kwa">floor</span><span class="hl sym">(</span><span class="hl kwc">$i</span> <span class="hl sym">/</span> BOARD_COLS<span class="hl sym">);</span>
         <span class="hl kwc">$isFirst</span> <span class="hl sym">=</span> <span class="hl kwc">$i</span> % BOARD_COLS <span class="hl sym">==</span> <span class="hl num">0</span><span class="hl sym">;</span>
         <span class="hl kwc">$isLast</span> <span class="hl sym">= (</span><span class="hl kwc">$i</span> <span class="hl sym">+</span> <span class="hl num">1</span><span class="hl sym">)</span> % BOARD_COLS <span class="hl sym">==</span> <span class="hl num">0</span><span class="hl sym">;</span>
         <span class="hl kwc">$c</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">];</span>

         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$row</span> % <span class="hl num">2</span> <span class="hl sym">==</span> <span class="hl num">1</span><span class="hl sym">) {</span>
            <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isLast</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">-(</span>BOARD_COLS<span class="hl sym">-</span><span class="hl num">1</span><span class="hl sym">)];</span>
            <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">-</span>BOARD_COLS<span class="hl sym">];</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$row</span> <span class="hl sym">!=</span> <span class="hl kwc">$m</span><span class="hl sym">) {</span>
               <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isLast</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">+(</span>BOARD_COLS<span class="hl sym">+</span><span class="hl num">1</span><span class="hl sym">)];</span>
               <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">+</span>BOARD_COLS<span class="hl sym">];</span>
            <span class="hl sym">}</span>
         <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$row</span> <span class="hl sym">!=</span> <span class="hl num">0</span><span class="hl sym">) {</span>
               <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isFirst</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">-(</span>BOARD_COLS<span class="hl sym">+</span><span class="hl num">1</span><span class="hl sym">)];</span>
               <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">-</span>BOARD_COLS<span class="hl sym">];</span>
            <span class="hl sym">}</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$row</span> <span class="hl sym">!=</span> <span class="hl kwc">$m</span><span class="hl sym">) {</span>
               <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isFirst</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">+(</span>BOARD_COLS<span class="hl sym">-</span><span class="hl num">1</span><span class="hl sym">)];</span>
               <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">+</span>BOARD_COLS<span class="hl sym">];</span>
            <span class="hl sym">}</span>
         <span class="hl sym">}</span>
         <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isFirst</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">-</span><span class="hl num">1</span><span class="hl sym">];</span>
         <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$isLast</span><span class="hl sym">)</span> <span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">+</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl sym">}</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">initializeCache</span><span class="hl sym">();</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">initializeCache</span><span class="hl sym">(){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECES<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span>
         <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$j</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">&lt;</span>PIECE_ORIENTATIONS<span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">++)</span>
            <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$k</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">++)</span>
               <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$m</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$m</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$m</span><span class="hl sym">++)</span>
                  <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">][</span><span class="hl kwc">$j</span><span class="hl sym">][</span><span class="hl kwc">$k</span><span class="hl sym">][</span><span class="hl kwc">$m</span><span class="hl sym">] =</span> null<span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">unmark</span><span class="hl sym">(){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span><span class="hl kwd">unmark</span><span class="hl sym">();</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">firstEmptyCellIndex</span><span class="hl sym">(){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span><span class="hl kwd">isEmpty</span><span class="hl sym">())</span> <span class="hl kwa">return</span> <span class="hl kwc">$i</span><span class="hl sym">;</span>
      <span class="hl kwa">return</span> <span class="hl sym">-</span><span class="hl num">1</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">remove</span><span class="hl sym">(&amp;</span><span class="hl kwc">$p</span><span class="hl sym">){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span>piece <span class="hl sym">==</span> <span class="hl kwc">$p</span><span class="hl sym">)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span>piece <span class="hl sym">=</span> null<span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">find</span><span class="hl sym">(&amp;</span><span class="hl kwc">$p</span><span class="hl sym">,&amp;</span><span class="hl kwc">$c</span><span class="hl sym">){</span>
      <span class="hl kwa">if</span> <span class="hl sym">((</span><span class="hl kwc">$p</span> <span class="hl sym">!=</span> null<span class="hl sym">) &amp;&amp; ((!</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>marked<span class="hl sym">) &amp;&amp; (</span><span class="hl kwc">$c</span> <span class="hl sym">!=</span> null<span class="hl sym">))){</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellsPieceWillFill<span class="hl sym">[</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellCount<span class="hl sym">] =</span> <span class="hl kwc">$c</span><span class="hl sym">;</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellCount<span class="hl sym">++;</span>
         <span class="hl kwc">$p</span><span class="hl sym">-&gt;</span><span class="hl kwd">mark</span><span class="hl sym">();</span>
         <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>SIDES<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">find</span><span class="hl sym">(</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">],</span><span class="hl kwc">$c</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]); }</span>
      <span class="hl sym">}</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">add</span><span class="hl sym">(</span><span class="hl kwc">$pieceIndex</span><span class="hl sym">,</span><span class="hl kwc">$boardIndex</span><span class="hl sym">,&amp;</span><span class="hl kwc">$p</span><span class="hl sym">){</span>
      <span class="hl kwc">$a</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>number<span class="hl sym">][</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>orientation<span class="hl sym">][</span><span class="hl kwc">$pieceIndex</span><span class="hl sym">][</span><span class="hl kwc">$boardIndex</span><span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellCount <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
      <span class="hl kwc">$p</span><span class="hl sym">-&gt;</span><span class="hl kwd">unmark</span><span class="hl sym">();</span>

      <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$a</span> <span class="hl sym">==</span> null<span class="hl sym">){</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">find</span><span class="hl sym">(</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span><span class="hl kwd">cell</span><span class="hl sym">(</span><span class="hl kwc">$pieceIndex</span><span class="hl sym">),</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$boardIndex</span><span class="hl sym">]);</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellCount <span class="hl sym">!=</span> PIECE_SIZE<span class="hl sym">){</span>
            <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>number<span class="hl sym">][</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>orientation<span class="hl sym">]</span>
               <span class="hl sym">[</span><span class="hl kwc">$pieceIndex</span><span class="hl sym">][</span><span class="hl kwc">$boardIndex</span><span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>noFit<span class="hl sym">;</span>
            <span class="hl kwa">return</span> false<span class="hl sym">;</span>
         <span class="hl sym">}</span>
         <span class="hl kwc">$a</span> <span class="hl sym">=</span> <span class="hl kwa">array_slice</span><span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cellsPieceWillFill<span class="hl sym">,</span><span class="hl num">0</span><span class="hl sym">);</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>number<span class="hl sym">][</span><span class="hl kwc">$p</span><span class="hl sym">-&gt;</span>orientation<span class="hl sym">][</span><span class="hl kwc">$pieceIndex</span><span class="hl sym">][</span><span class="hl kwc">$boardIndex</span><span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">;</span>
      <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$a</span> <span class="hl sym">==</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>noFit<span class="hl sym">)</span> <span class="hl kwa">return</span> false<span class="hl sym">;</span>
      <span class="hl sym">}</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span> <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span><span class="hl kwd">isEmpty</span><span class="hl sym">())</span> <span class="hl kwa">return</span> false<span class="hl sym">; }</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span>piece <span class="hl sym">=</span> <span class="hl kwc">$p</span><span class="hl sym">; }</span>
      <span class="hl kwa">return</span> true<span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">asString</span><span class="hl sym">(){</span>
      <span class="hl kwc">$a</span> <span class="hl sym">=</span> <span class="hl kwa">array</span><span class="hl sym">();</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span> <span class="hl kwc">$a</span><span class="hl sym">[] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span>piece<span class="hl sym">-&gt;</span>number<span class="hl sym">;</span>
      <span class="hl kwa">return implode</span><span class="hl sym">(</span><span class="hl str">&quot;&quot;</span><span class="hl sym">,</span><span class="hl kwc">$a</span><span class="hl sym">);</span>
   <span class="hl sym">}</span>

<span class="hl com">/*</span>
<span class="hl com">   function printBoard(){</span>
<span class="hl com">      print(&quot;cell\tNW NE W  E  SW SE\n&quot;);</span>
<span class="hl com">      for ($i=0; $i&lt;BOARD_SIZE; $i++){</span>
<span class="hl com">         printf(&quot;%d \t&quot;, $i);</span>
<span class="hl com">         for ($j=0; $j&lt;SIDES; $j++){</span>
<span class="hl com">            $c = $this-&gt;cells[$i]-&gt;next[$j];</span>
<span class="hl com">            if ($c == null) print(&quot;-- &quot;); else printf(&quot;%2d &quot;, $c-&gt;number);</span>
<span class="hl com">         }</span>
<span class="hl com">         print(&quot;\n&quot;);</span>
<span class="hl com">      }</span>
<span class="hl com">      print(&quot;\n&quot;);</span>
<span class="hl com">   }</span>
<span class="hl com">*/</span>
<span class="hl sym">}</span>


<span class="hl kwa">class</span> PieceCell <span class="hl kwa">extends</span> Cell <span class="hl sym">{</span>
   <span class="hl kwa">function</span> <span class="hl kwd">PieceCell</span><span class="hl sym">() {</span> Cell<span class="hl sym">::</span><span class="hl kwd">Cell</span><span class="hl sym">(); }</span>

   <span class="hl kwa">function</span> <span class="hl kwd">flip</span><span class="hl sym">() {</span>
      <span class="hl kwc">$swap</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$swap</span><span class="hl sym">;</span>

      <span class="hl kwc">$swap</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$swap</span><span class="hl sym">;</span>

      <span class="hl kwc">$swap</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$swap</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">rotate</span><span class="hl sym">() {</span>
      <span class="hl kwc">$swap</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">];</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$swap</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>
<span class="hl sym">}</span>


<span class="hl kwa">class</span> Piece <span class="hl sym">{</span>
   var <span class="hl kwc">$number</span><span class="hl sym">;</span>
   var <span class="hl kwc">$orientation</span> <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
   var <span class="hl kwc">$cache</span><span class="hl sym">;</span>

   <span class="hl kwa">function</span> <span class="hl kwd">Piece</span><span class="hl sym">(</span><span class="hl kwc">$n</span><span class="hl sym">) {</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>number <span class="hl sym">=</span> <span class="hl kwc">$n</span><span class="hl sym">;</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$k</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">&lt;</span>PIECE_ORIENTATIONS<span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">++){</span>

         <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span>
            <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">][</span><span class="hl kwc">$i</span><span class="hl sym">] =</span> new <span class="hl kwd">PieceCell</span><span class="hl sym">();</span>

         <span class="hl kwa">switch</span> <span class="hl sym">(</span><span class="hl kwc">$n</span><span class="hl sym">){</span>
            case <span class="hl num">0</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make0</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">1</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make1</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">2</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make2</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">3</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make3</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">4</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make4</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">5</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make5</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">6</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make6</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">7</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make7</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">8</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make8</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
            case <span class="hl num">9</span><span class="hl sym">:</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">make9</span><span class="hl sym">(</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] );</span> <span class="hl kwa">break</span><span class="hl sym">;</span>
         <span class="hl sym">}</span>

         <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span><span class="hl kwc">$k</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$i</span> % PIECE_ROTATIONS <span class="hl sym">==</span> <span class="hl num">0</span><span class="hl sym">)</span>
               <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$j</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">][</span><span class="hl kwc">$j</span><span class="hl sym">]-&gt;</span><span class="hl kwd">flip</span><span class="hl sym">();</span>
            <span class="hl kwa">else</span>
               <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$j</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">][</span><span class="hl kwc">$j</span><span class="hl sym">]-&gt;</span><span class="hl kwd">rotate</span><span class="hl sym">();</span>
      <span class="hl sym">}</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">unmark</span><span class="hl sym">(){</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++)</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>orientation<span class="hl sym">][</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span><span class="hl kwd">unmark</span><span class="hl sym">();</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">nextOrientation</span><span class="hl sym">(){</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>orientation <span class="hl sym">= (</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>orientation <span class="hl sym">+</span> <span class="hl num">1</span><span class="hl sym">)</span> % PIECE_ORIENTATIONS<span class="hl sym">;</span>
      <span class="hl kwa">return</span> <span class="hl kwc">$this</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">cell</span><span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">){</span> <span class="hl kwa">return</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>cache<span class="hl sym">[</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>orientation<span class="hl sym">][</span><span class="hl kwc">$i</span><span class="hl sym">]; }</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make0</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make1</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make2</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make3</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make4</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make5</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make6</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make7</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make8</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">make9</span><span class="hl sym">(&amp;</span><span class="hl kwc">$a</span><span class="hl sym">) {</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">0</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>E<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>W<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">2</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>NW<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">];</span>
      <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">3</span><span class="hl sym">]-&gt;</span><span class="hl kwa">next</span><span class="hl sym">[</span>SE<span class="hl sym">] =</span> <span class="hl kwc">$a</span><span class="hl sym">[</span><span class="hl num">4</span><span class="hl sym">];</span>
   <span class="hl sym">}</span>

<span class="hl com">/*</span>
<span class="hl com">   function printPiece(){</span>
<span class="hl com">      printf(&quot;Piece # %d\n&quot;, $this-&gt;number);</span>
<span class="hl com">      print(&quot;cell\tNW NE W  E  SW SE\n&quot;);</span>
<span class="hl com">      for ($i=0; $i&lt;PIECE_SIZE; $i++){</span>
<span class="hl com">         printf(&quot;%d \t&quot;, $i);</span>
<span class="hl com">         for ($j=0; $j&lt;SIDES; $j++){</span>
<span class="hl com">            $neighbour = $this-&gt;cell($i)-&gt;next[$j];</span>
<span class="hl com">            if ($neighbour == null){</span>
<span class="hl com">               print(&quot;-- &quot;);</span>
<span class="hl com">            } else {</span>
<span class="hl com">               for ($k=0; $k&lt;PIECE_SIZE; $k++)</span>
<span class="hl com">                  if (($this-&gt;cell($k)) == $neighbour) printf(&quot;%2d &quot;, $k);</span>
<span class="hl com">            }</span>
<span class="hl com">         }</span>
<span class="hl com">         print(&quot;\n&quot;);</span>
<span class="hl com">      }</span>
<span class="hl com">      print(&quot;\n&quot;);</span>
<span class="hl com">   }</span>
<span class="hl com">*/</span>
<span class="hl sym">}</span>


<span class="hl kwa">class</span> Solver <span class="hl sym">{</span>
   var <span class="hl kwc">$countdown</span><span class="hl sym">,</span> <span class="hl kwc">$n</span><span class="hl sym">,</span> <span class="hl kwc">$board</span><span class="hl sym">,</span> <span class="hl kwc">$pieces</span><span class="hl sym">,</span> <span class="hl kwc">$unplaced</span><span class="hl sym">,</span> <span class="hl kwc">$unplacedSize</span><span class="hl sym">,</span> <span class="hl kwc">$once</span><span class="hl sym">,</span>
       <span class="hl kwc">$first</span><span class="hl sym">,</span> <span class="hl kwc">$last</span><span class="hl sym">,</span> <span class="hl kwc">$current</span><span class="hl sym">;</span>

   <span class="hl kwa">function</span> <span class="hl kwd">Solver</span><span class="hl sym">(</span><span class="hl kwc">$arg</span><span class="hl sym">) {</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>n <span class="hl sym">=</span> <span class="hl kwc">$arg</span><span class="hl sym">;</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>countdown <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>n<span class="hl sym">;</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board <span class="hl sym">=</span> new <span class="hl kwd">Board</span><span class="hl sym">();</span>

      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECES<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>pieces<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">] =</span> new <span class="hl kwd">Piece</span><span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">);</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplaced<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">] =</span> true<span class="hl sym">;</span>
      <span class="hl sym">}</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplacedSize <span class="hl sym">=</span> PIECES<span class="hl sym">;</span>

      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>once <span class="hl sym">=</span> true<span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">shouldPrune</span><span class="hl sym">() {</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span><span class="hl kwd">unmark</span><span class="hl sym">();</span>
      <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>BOARD_SIZE<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++) {</span>
         <span class="hl kwc">$forall</span> <span class="hl sym">= (</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span>cells<span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]-&gt;</span><span class="hl kwd">contiguousEmptyCells</span><span class="hl sym">()</span> % PIECE_SIZE<span class="hl sym">) ==</span> <span class="hl num">0</span><span class="hl sym">;</span>
         <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$forall</span><span class="hl sym">)</span> <span class="hl kwa">return</span> <span class="hl sym">!</span><span class="hl kwc">$forall</span><span class="hl sym">;</span>
      <span class="hl sym">}</span>
      <span class="hl kwa">return</span> <span class="hl sym">!</span><span class="hl kwc">$forall</span><span class="hl sym">;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">puzzleSolved</span><span class="hl sym">() {</span>
      <span class="hl kwc">$a</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span><span class="hl kwd">asString</span><span class="hl sym">();</span>
      <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>first <span class="hl sym">==</span> null<span class="hl sym">){</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>first <span class="hl sym">=</span> <span class="hl kwc">$a</span><span class="hl sym">;</span>
         <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>last <span class="hl sym">=</span> <span class="hl kwc">$a</span><span class="hl sym">;</span>
      <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$a</span> <span class="hl sym">&lt;</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>first<span class="hl sym">){</span>
            <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>first <span class="hl sym">=</span> <span class="hl kwc">$a</span><span class="hl sym">;</span>
         <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
            <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$a</span> <span class="hl sym">&gt;</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>last<span class="hl sym">){</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>last <span class="hl sym">=</span> <span class="hl kwc">$a</span><span class="hl sym">; }</span>
         <span class="hl sym">}</span>
      <span class="hl sym">}</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>countdown<span class="hl sym">--;</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">findSolutions</span><span class="hl sym">() {</span>
      <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>countdown <span class="hl sym">&gt;</span> <span class="hl num">0</span><span class="hl sym">){</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplacedSize <span class="hl sym">&gt;</span> <span class="hl num">0</span><span class="hl sym">){</span>
            <span class="hl kwc">$emptyCellIndex</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span><span class="hl kwd">firstEmptyCellIndex</span><span class="hl sym">();</span>

            <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$k</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">&lt;</span>PIECES<span class="hl sym">;</span> <span class="hl kwc">$k</span><span class="hl sym">++){</span>
               <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplaced<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">]){</span>
                  <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplaced<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] =</span> false<span class="hl sym">;</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplacedSize<span class="hl sym">--;</span>

                  <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$i</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">&lt;</span>PIECE_ORIENTATIONS<span class="hl sym">;</span> <span class="hl kwc">$i</span><span class="hl sym">++){</span>
                     <span class="hl kwc">$piece</span> <span class="hl sym">=</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>pieces<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">]-&gt;</span><span class="hl kwd">nextOrientation</span><span class="hl sym">();</span>
                     <span class="hl kwa">for</span> <span class="hl sym">(</span><span class="hl kwc">$j</span><span class="hl sym">=</span><span class="hl num">0</span><span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">&lt;</span>PIECE_SIZE<span class="hl sym">;</span> <span class="hl kwc">$j</span><span class="hl sym">++){</span>
                        <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span><span class="hl kwd">add</span><span class="hl sym">(</span><span class="hl kwc">$j</span><span class="hl sym">,</span><span class="hl kwc">$emptyCellIndex</span><span class="hl sym">,</span><span class="hl kwc">$piece</span><span class="hl sym">)){</span>
                           <span class="hl kwa">if</span> <span class="hl sym">(!</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">shouldPrune</span><span class="hl sym">())</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">findSolutions</span><span class="hl sym">();</span>
                           <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>board<span class="hl sym">-&gt;</span><span class="hl kwd">remove</span><span class="hl sym">(</span><span class="hl kwc">$piece</span><span class="hl sym">);</span>
                        <span class="hl sym">}</span>
                     <span class="hl sym">}</span>
                  <span class="hl sym">}</span>
                  <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplaced<span class="hl sym">[</span><span class="hl kwc">$k</span><span class="hl sym">] =</span> true<span class="hl sym">;</span> <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>unplacedSize<span class="hl sym">++;</span>
               <span class="hl sym">}</span>
            <span class="hl sym">}</span>
         <span class="hl sym">}</span> <span class="hl kwa">else</span> <span class="hl sym">{</span>
            <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">puzzleSolved</span><span class="hl sym">();</span>
         <span class="hl sym">}</span>
      <span class="hl sym">}</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">printBoard</span><span class="hl sym">(&amp;</span><span class="hl kwc">$s</span><span class="hl sym">) {</span>
      <span class="hl kwc">$indent</span> <span class="hl sym">=</span> false<span class="hl sym">;</span>
      <span class="hl kwc">$i</span> <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
      <span class="hl kwa">while</span> <span class="hl sym">(</span><span class="hl kwc">$i</span> <span class="hl sym">&lt;</span> <span class="hl kwa">strlen</span><span class="hl sym">(</span><span class="hl kwc">$s</span><span class="hl sym">)){</span>
         <span class="hl kwa">if</span> <span class="hl sym">(</span><span class="hl kwc">$indent</span><span class="hl sym">)</span> <span class="hl kwa">print</span><span class="hl sym">(</span><span class="hl str">&quot; &quot;</span><span class="hl sym">);</span>
         <span class="hl kwc">$j</span> <span class="hl sym">=</span> <span class="hl num">0</span><span class="hl sym">;</span>
         <span class="hl kwa">while</span> <span class="hl sym">(</span><span class="hl kwc">$j</span> <span class="hl sym">&lt;</span> BOARD_COLS<span class="hl sym">){</span>
            <span class="hl kwa">print</span><span class="hl sym">(</span><span class="hl kwc">$s</span><span class="hl sym">[</span><span class="hl kwc">$i</span><span class="hl sym">]);</span> <span class="hl kwa">print</span><span class="hl sym">(</span><span class="hl str">&quot; &quot;</span><span class="hl sym">);</span>
            <span class="hl kwc">$j</span><span class="hl sym">++;</span>
            <span class="hl kwc">$i</span><span class="hl sym">++;</span>
         <span class="hl sym">}</span>
         <span class="hl kwa">print</span><span class="hl sym">(</span><span class="hl str">&quot;</span><span class="hl esc">\n</span><span class="hl str">&quot;</span><span class="hl sym">);</span>
         <span class="hl kwc">$indent</span> <span class="hl sym">= !</span><span class="hl kwc">$indent</span><span class="hl sym">;</span>
      <span class="hl sym">}</span>
      <span class="hl kwa">print</span><span class="hl sym">(</span><span class="hl str">&quot;</span><span class="hl esc">\n</span><span class="hl str">&quot;</span><span class="hl sym">);</span>
   <span class="hl sym">}</span>

   <span class="hl kwa">function</span> <span class="hl kwd">printSolutions</span><span class="hl sym">() {</span>
      <span class="hl kwa">printf</span><span class="hl sym">(</span><span class="hl str">&quot;%d solutions found</span><span class="hl esc">\n\n</span><span class="hl str">&quot;</span><span class="hl sym">,</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>n<span class="hl sym">);</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">printBoard</span><span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>first<span class="hl sym">);</span>
      <span class="hl kwc">$this</span><span class="hl sym">-&gt;</span><span class="hl kwd">printBoard</span><span class="hl sym">(</span><span class="hl kwc">$this</span><span class="hl sym">-&gt;</span>last<span class="hl sym">);</span>
   <span class="hl sym">}</span>
<span class="hl sym">}</span>


<span class="hl kwc">$s</span> <span class="hl sym">=</span> new <span class="hl kwd">Solver</span><span class="hl sym">(</span><span class="hl kwc">$argv</span><span class="hl sym">[</span><span class="hl num">1</span><span class="hl sym">]);</span>
<span class="hl kwc">$s</span><span class="hl sym">-&gt;</span><span class="hl kwd">findSolutions</span><span class="hl sym">();</span>
<span class="hl kwc">$s</span><span class="hl sym">-&gt;</span><span class="hl kwd">printSolutions</span><span class="hl sym">();</span>

?<span class="hl sym">&gt;</span>
