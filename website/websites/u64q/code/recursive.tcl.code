<source>
<def></def><slc># ----------------------------------------------------------------------</slc><br />
<def></def><slc># The Computer Language Shootout</slc><br />
<def></def><slc># http://shootout.alioth.debian.org/</slc><br />
<def></def><slc>#</slc><br />
<def></def><slc># Contributed by Michael Schlenker</slc><br />
<def></def><slc># modified by Andrew McParland</slc><br />
<def></def><slc># ----------------------------------------------------------------------</slc><br />
<def></def><br />
<kwa>proc</kwa> <def>Ack</def> <sym>{</sym><def>x y</def><sym>} {</sym><br />
<def></def>    <kwa>expr</kwa> <def></def><sym>{</sym> <def></def><kwb>$x</kwb> <def></def><sym>==</sym> <def></def><num>0</num> <def>?</def> <kwb>$y</kwb><def></def><sym>+</sym><def></def><num>1</num> <def></def><sym>: (</sym><def></def><kwb>$y</kwb> <def></def><sym>==</sym> <def></def><num>0</num> <def>?</def> <sym>[</sym><def>Ack</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$x</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><num>1</num><def></def><sym>] :</sym><br />
<def></def>       <sym>[</sym><def>Ack</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$x</kwb><def></def><kwc>-1</kwc><def></def><sym>}] [</sym><def>Ack</def> <kwb>$x</kwb> <def></def><sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$y</kwb> <def></def><kwc>-1</kwc><def></def><sym>}]]])}</sym><br />
<def></def><sym>}</sym><br />
<def></def><kwa>proc</kwa> <def>Fib</def> <sym>{</sym><def>n</def><sym>} {</sym><br />
<def></def>    <kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb> <def></def><sym>&lt;</sym> <def></def><num>2</num> <def>?</def> <num>1</num> <def></def><sym>: [</sym><def>Fib</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb> <def></def><kwc>-2</kwc><def></def><sym>}]] + [</sym><def>Fib</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb> <def></def><kwc>-1</kwc><def></def><sym>}]]}</sym><br />
<def></def><sym>}</sym><br />
<def></def><kwa>proc</kwa> <def>FibFP</def> <sym>{</sym><def>n</def><sym>} {</sym><br />
<def></def>    <kwa>expr</kwa> <def></def><sym>{</sym><def>double</def><sym>(</sym><def></def><kwb>$n</kwb><def></def><sym>) &lt;</sym> <def></def><num>2.0</num> <def>?</def> <num>1.0</num> <def></def><sym>: [</sym><def>Fib</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb> <def></def><kwc>-2</kwc><def>.0</def><sym>}]] + [</sym><def>Fib</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb> <def></def><kwc>-1</kwc><def>.0</def><sym>}]]}</sym><br />
<def></def><sym>}</sym><br />
<def></def><kwa>proc</kwa> <def>Tak</def> <sym>{</sym><def>x y z</def><sym>} {</sym><br />
<def></def>    <kwa>expr</kwa> <def></def><sym>{</sym> <def></def><kwb>$y</kwb> <def></def><sym>&lt;</sym> <def></def><kwb>$x</kwb> <def>?</def> <sym>([</sym><def>Tak</def> <sym>[</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$x</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><kwb>$y $z</kwb><def></def><sym>] [</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$y</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><kwb>$z $x</kwb><def></def><sym>]</sym> <def>\</def><br />
       <sym>[</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$z</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><kwb>$x $y</kwb><def></def><sym>]]) :</sym> <def></def><kwb>$z</kwb> <def></def><sym>}</sym><br />
<def></def><sym>}</sym><br />
<def></def><kwa>proc</kwa> <def>TakFP</def> <sym>{</sym><def>x y z</def><sym>} {</sym><br />
<def></def>    <kwa>expr</kwa> <def></def><sym>{</sym> <def>double</def><sym>(</sym><def></def><kwb>$y</kwb><def></def><sym>) &lt;</sym> <def>double</def><sym>(</sym><def></def><kwb>$x</kwb><def></def><sym>)</sym> <def>? double</def><sym>([</sym><def>Tak</def> <sym>[</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$x</kwb><def></def><kwc>-1</kwc><def>.0</def><sym>}]</sym> <def></def><kwb>$y $z</kwb><def></def><sym>]</sym> <def>\</def><br />
       <sym>[</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$y</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><kwb>$z $x</kwb><def></def><sym>] [</sym><def>Tak</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$z</kwb><def></def><kwc>-1</kwc><def></def><sym>}]</sym> <def></def><kwb>$x $y</kwb><def></def><sym>]]) :</sym> <def>double</def><sym>(</sym><def></def><kwb>$z</kwb><def></def><sym>) }</sym><br />
<def></def><sym>}</sym><br />
<def></def><br />
<kwa>proc</kwa> <def>main</def> <sym>{</sym><def>argv</def><sym>} {</sym><br />
<def></def>    <kwa>set</kwa> <def>n</def> <sym>[</sym><def></def><kwa>lindex</kwa> <def></def><kwb>$argv</kwb> <def></def><num>0</num><def></def><sym>]</sym><br />
<def></def>    <kwa>incr</kwa> <def>n</def> <kwc>-1</kwc><br />
<def></def>    <kwa>set</kwa> <def>n1</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb><def></def><sym>+</sym><def></def><num>1</num><def></def><sym>}]</sym><br />
<def></def>    <kwa>set</kwa> <def>n28</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><num>28.0</num><def></def><sym>+</sym><def></def><kwb>$n</kwb><def></def><sym>}]</sym><br />
<def></def>    <kwa>set</kwa> <def>n3</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb><def></def><sym>*</sym><def></def><num>3</num><def></def><sym>}]</sym><br />
<def></def>    <kwa>set</kwa> <def>n2</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def></def><kwb>$n</kwb><def></def><sym>*</sym><def></def><num>2</num><def></def><sym>}]</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;Ack(3,%d): %d&quot;</str><def></def> <kwb>$n1</kwb> <def></def><sym>[</sym><def>Ack</def> <num>3</num> <def></def><kwb>$n1</kwb><def></def><sym>]]</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;Fib(%.1f): %.1f&quot;</str><def></def> <kwb>$n28</kwb> <def></def><sym>[</sym><def>FibFP</def> <kwb>$n28</kwb><def></def><sym>]]</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;Tak(%d,%d,%d): %d&quot;</str><def></def> <kwb>$n3 $n2 $n</kwb> <def></def><sym>[</sym><def>Tak</def> <kwb>$n3 $n2 $n</kwb><def></def><sym>]]</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;Fib(3): %d&quot;</str><def></def> <sym>[</sym><def>Fib</def> <num>3</num> <def></def><sym>]]</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;Tak(3.0,2.0,1.0): %.1f&quot;</str><def></def> <sym>[</sym><def>TakFP</def> <num>3.0 2.0 1.0</num><def></def><sym>]]</sym><br />
<def></def>    <kwa>return</kwa> <def></def><num>0</num><def></def><sym>;</sym><br />
<def></def><sym>}</sym><br />
<def></def><br />
<kwa>interp</kwa> <def>recursionlimit</def> <sym>{}</sym> <def></def><num>100000</num><br />
<def>main</def> <kwb>$argv</kwb><def></def><br />
</source>
