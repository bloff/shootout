<source>
<def></def><com>/*</com><br />
<com>   The Computer Language Shootout</com><br />
<com>   http://shootout.alioth.debian.org/</com><br />
<com>   contributed by Andrei Formiga</com><br />
<com>   modified by Isaac Gouy</com><br />
<com>*/</com><def></def><br />
<br />
<kwa>object</kwa> <def>partialsums</def> <sym>{</sym><br />
<def></def><br />
   <kwa>def</kwa> <def>main</def><sym>(</sym><def>args</def><sym>:</sym> <def></def><kwc>Array</kwc><def></def><sym>[</sym><def></def><kwc>String</kwc><def></def><sym>]) = {</sym><br />
<def>      accumulate</def><sym>(</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym><def></def><num>0</num><def></def><sym>,</sym> <def></def><kwc>Integer</kwc><def></def><sym>.</sym><def>parseInt</def><sym>(</sym><def>args</def><sym>(</sym><def></def><num>0</num><def></def><sym>))+</sym><def></def><num>1</num><def></def><sym>,</sym> <def></def><num>1</num><def></def><sym>,</sym><def></def><num>1</num><def></def><sym>)</sym><br />
<def></def>   <sym>}</sym><br />
<def></def><br />
   <kwa>val</kwa> <def>twothirds</def> <sym>=</sym> <def></def><num>2.0</num> <def></def><sym>/</sym> <def></def><num>3.0</num><br />
<def></def><br />
   <kwa>def</kwa> <def>accumulate</def><sym>(</sym><def>a1</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a2</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a3</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a4</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a5</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym><br />
<def>                  a6</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a7</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a8</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>a9</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym><br />
<def>                  n</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>alt</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>,</sym> <def>k</def><sym>:</sym> <def></def><kwb>double</kwb><def></def><sym>) :</sym> <def>Unit</def> <sym>= {</sym><br />
<def></def><br />
      <kwa>if</kwa> <def></def><sym>(</sym><def>k</def> <sym>&lt;</sym> <def>n</def><sym>) {</sym><br />
<def></def><br />
         <kwa>val</kwa> <def>k2</def> <sym>=</sym>  <def></def><kwc>Math</kwc><def></def><sym>.</sym><def>pow</def><sym>(</sym><def>k</def><sym>,</sym> <def></def><num>2.0</num><def></def><sym>)</sym><br />
<def></def>         <kwa>val</kwa> <def>k3</def> <sym>=</sym> <def>k2</def> <sym>*</sym> <def>k</def><br />
         <kwa>val</kwa> <def>sk</def> <sym>=</sym> <def></def><kwc>Math</kwc><def></def><sym>.</sym><def>sin</def><sym>(</sym><def>k</def><sym>)</sym><br />
<def></def>         <kwa>val</kwa> <def>ck</def> <sym>=</sym> <def></def><kwc>Math</kwc><def></def><sym>.</sym><def>cos</def><sym>(</sym><def>k</def><sym>)</sym><br />
<def><br />
         accumulate</def><sym>(</sym><br />
<def>             a1</def> <sym>+</sym> <def></def><kwc>Math</kwc><def></def><sym>.</sym><def>pow</def><sym>(</sym><def>twothirds</def><sym>,</sym> <def>k</def> <sym>-</sym> <def></def><num>1.0</num><def></def><sym>)</sym><br />
<def></def>            <sym>,</sym><def>a2</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/</sym> <def></def><kwc>Math</kwc><def></def><sym>.</sym><def>sqrt</def><sym>(</sym><def>k</def><sym>)</sym><br />
<def></def>            <sym>,</sym><def>a3</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/ (</sym><def>k</def> <sym>* (</sym><def>k</def> <sym>+</sym> <def></def><num>1.0</num><def></def><sym>))</sym><br />
<def></def>            <sym>,</sym><def>a4</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/ (</sym><def>k3</def> <sym>*</sym> <def>sk</def><sym>*</sym><def>sk</def><sym>)</sym><br />
<def></def>            <sym>,</sym><def>a5</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/ (</sym><def>k3</def> <sym>*</sym> <def>ck</def><sym>*</sym><def>ck</def><sym>)</sym><br />
<def></def>            <sym>,</sym><def>a6</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/</sym> <def>k</def><br />
            <sym>,</sym><def>a7</def> <sym>+</sym> <def></def><num>1.0</num> <def></def><sym>/</sym> <def>k2</def><br />
            <sym>,</sym><def>a8</def> <sym>+</sym> <def>alt</def> <sym>/</sym> <def>k</def><br />
            <sym>,</sym><def>a9</def> <sym>+</sym> <def>alt</def> <sym>/ (</sym><def></def><num>2.0</num> <def></def><sym>*</sym> <def>k</def> <sym>-</sym> <def></def><num>1.0</num><def></def><sym>)</sym><br />
<def></def>            <sym>,</sym><def>n</def><br />
            <sym>,-</sym><def>alt</def><br />
            <sym>,</sym><def>k</def> <sym>+</sym> <def></def><num>1.0</num><br />
<def></def>            <sym>)</sym><br />
<def></def><br />
      <sym>}</sym> <def></def><kwa>else</kwa> <def></def><sym>{</sym><br />
<def></def><br />
         <kwa>val</kwa> <def>f</def> <sym>=</sym> <def></def><str>&quot;{0,number,0.000000000}</str><esc>\t</esc><str>&quot;</str><def><br />
         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;(2/3)^k</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a1</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;k^-0.5</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a2</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;1/k(k+1)</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a3</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Flint Hills</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a4</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Cookson Hills</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a5</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Harmonic</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a6</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Riemann Zeta</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a7</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Alternating Harmonic</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a8</def><sym>)</sym><br />
<def>         Console</def><sym>.</sym><def>printf</def><sym>(</sym> <def>f</def> <sym>+</sym> <def></def><str>&quot;Gregory</str><esc>\n</esc><str>&quot;</str><def></def><sym>,</sym> <def>a9</def><sym>)</sym><br />
<def></def><br />
      <sym>}</sym><br />
<def></def>   <sym>}</sym><br />
<def></def><sym>}</sym><br />
<def></def><br />
</source>
