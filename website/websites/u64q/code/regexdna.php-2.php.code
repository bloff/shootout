<source>
<def></def><sym>&lt;</sym><def>?php</def><br />
<slc>#</slc><br />
<def></def><slc># The Computer Language Shootout</slc><br />
<def></def><slc># http://shootout.alioth.debian.org/</slc><br />
<def></def><slc>#</slc><br />
<def></def><slc># contributed by Danny Sauer</slc><br />
<def></def><slc># modified by Josh Goldfoot</slc><br />
<def></def><br />
<slc># regexp matches</slc><br />
<def></def><br />
<slc>#ini_set(&quot;memory_limit&quot;,&quot;40M&quot;);</slc><br />
<def></def><br />
<kwc>$variants</kwc> <def></def><sym>=</sym> <def></def><kwa>array</kwa><def></def><sym>(</sym><br />
<def></def>    <str>'agggtaaa|tttaccct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'[cgt]gggtaaa|tttaccc[acg]'</str><def></def><sym>,</sym><br />
<def></def>    <str>'a[act]ggtaaa|tttacc[agt]t'</str><def></def><sym>,</sym><br />
<def></def>    <str>'ag[act]gtaaa|tttac[agt]ct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'agg[act]taaa|ttta[agt]cct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'aggg[acg]aaa|ttt[cgt]ccct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'agggt[cgt]aa|tt[acg]accct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'agggta[cgt]a|t[acg]taccct'</str><def></def><sym>,</sym><br />
<def></def>    <str>'agggtaa[cgt]|[acg]ttaccct'</str><def></def><sym>,</sym><br />
<def></def><sym>);</sym><br />
<def></def><br />
<slc># IUB replacement parallel arrays</slc><br />
<def></def><kwc>$IUB</kwc> <def></def><sym>=</sym> <def></def><kwa>array</kwa><def></def><sym>();</sym> <def></def><kwc>$IUBnew</kwc> <def></def><sym>=</sym> <def></def><kwa>array</kwa><def></def><sym>();</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/B/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(c|g|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/D/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|g|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/H/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|c|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/K/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(g|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/M/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|c)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/N/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|c|g|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/R/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|g)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/S/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(c|g)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/V/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|c|g)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/W/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(a|t)'</str><def></def><sym>;</sym><br />
<def></def><kwc>$IUB</kwc><def></def><sym>[]=</sym><def></def><str>'/Y/'</str><def></def><sym>;</sym>     <def></def><kwc>$IUBnew</kwc><def></def><sym>[]=</sym><def></def><str>'(c|t)'</str><def></def><sym>;</sym><br />
<def></def><br />
<slc># sequence descriptions start with &gt; and comments start with ;</slc><br />
<def></def><slc>#my $stuffToRemove = '^[&gt;;].*$|[\r\n]';</slc><br />
<def></def><kwc>$stuffToRemove</kwc> <def></def><sym>=</sym> <def></def><str>'^&gt;.*$|</str><esc>\n</esc><str>'</str><def></def><sym>;</sym> <def></def><slc># no comments, *nix-format test file...</slc><br />
<def></def><br />
<slc># read in file</slc><br />
<def></def><kwc>$contents</kwc> <def></def><sym>=</sym> <def></def><kwd>file_get_contents</kwd><def></def><sym>(</sym><def></def><str>'php://stdin'</str><def></def><sym>);</sym><br />
<def></def><kwc>$initialLength</kwc> <def></def><sym>=</sym> <def></def><kwa>strlen</kwa><def></def><sym>(</sym><def></def><kwc>$contents</kwc><def></def><sym>);</sym><br />
<def></def><br />
<slc># remove things</slc><br />
<def></def><kwc>$contents</kwc> <def></def><sym>=</sym> <def></def><kwa>preg_replace</kwa><def></def><sym>(</sym><def></def><str>&quot;/$stuffToRemove/m&quot;</str><def></def><sym>,</sym> <def></def><str>''</str><def></def><sym>,</sym> <def></def><kwc>$contents</kwc><def></def><sym>);</sym><br />
<def></def><kwc>$codeLength</kwc> <def></def><sym>=</sym> <def></def><kwa>strlen</kwa><def></def><sym>(</sym><def></def><kwc>$contents</kwc><def></def><sym>);</sym><br />
<def></def><br />
<slc># do regexp counts</slc><br />
<def></def><kwa>foreach</kwa> <def></def><sym>(</sym><def></def><kwc>$variants</kwc> <def>as</def> <kwc>$regex</kwc><def></def><sym>){</sym><br />
<def></def>    <kwa>print</kwa> <def></def><kwc>$regex</kwc> <def>.</def> <str>' '</str><def> .</def> <kwa>preg_match_all</kwa><def></def><sym>(</sym><def></def><str>&quot;/$regex/i&quot;</str><def></def><sym>,</sym> <def></def><kwc>$contents</kwc><def></def><sym>,</sym> <def></def><kwc>$discard</kwc><def></def><sym>)</sym><def>.</def> <str>&quot;</str><esc>\n</esc><str>&quot;</str><def></def><sym>;</sym><br />
<def></def><sym>}</sym><br />
<def></def><br />
<slc># do replacements</slc><br />
<def></def><kwc>$contents</kwc> <def></def><sym>=</sym> <def></def><kwa>preg_replace</kwa><def></def><sym>(</sym><def></def><kwc>$IUB</kwc><def></def><sym>,</sym> <def></def><kwc>$IUBnew</kwc><def></def><sym>,</sym> <def></def><kwc>$contents</kwc><def></def><sym>);</sym><br />
<def></def><br />
<kwa>print</kwa> <def></def><str>&quot;</str><esc>\n</esc><str>&quot;</str><def> .</def><br />
      <kwc>$initialLength</kwc> <def>.</def> <str>&quot;</str><esc>\n</esc><str>&quot;</str><def> .</def><br />
      <kwc>$codeLength</kwc> <def>.</def> <str>&quot;</str><esc>\n</esc><str>&quot;</str><def> .</def><br />
      <kwa>strlen</kwa><def></def><sym>(</sym><def></def><kwc>$contents</kwc><def></def><sym>)</sym> <def>.</def> <str>&quot;</str><esc>\n</esc><str>&quot;</str><def></def> <sym>;</sym><br />
<def>?</def><sym>&gt;</sym><def></def><br />
</source>
