<source>
<def></def><slc># The Computer Language Benchmarks Game</slc><br />
<def></def><slc># http://shootout.alioth.debian.org/</slc><br />
<def></def><slc>#</slc><br />
<def></def><slc># contributed by Antoine Pitrou</slc><br />
<def></def><slc># modified by Dominique Wahli</slc><br />
<def></def><slc># modified by Heinrich Acker</slc><br />
<def></def><br />
<kwa>import</kwa> <def>sys</def><sym>,</sym> <def>gc<br />
gc</def><sym>.</sym><def></def><kwd>disable</kwd><def></def><sym>()</sym><br />
<def></def><br />
<kwa>def</kwa> <def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def>item</def><sym>,</sym> <def>depth</def><sym>):</sym><br />
<def></def>    <kwa>if not</kwa> <def>depth</def><sym>:</sym> <def></def><kwa>return</kwa> <def>item</def><sym>,</sym> <def></def><kwa>None</kwa><def></def><sym>,</sym> <def></def><kwa>None</kwa><br />
<def>    item2</def> <sym>=</sym> <def>item</def> <sym>+</sym> <def>item<br />
    depth</def> <sym>-=</sym> <def></def><num>1</num><br />
<def></def>    <kwa>return</kwa> <def>item</def><sym>,</sym> <def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def>item2</def> <sym>-</sym> <def></def><num>1</num><def></def><sym>,</sym> <def>depth</def><sym>),</sym> <def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def>item2</def><sym>,</sym> <def>depth</def><sym>)</sym><br />
<def></def><br />
<kwa>def</kwa> <def></def><kwd>check_tree</kwd><def></def><sym>((</sym><def>item</def><sym>,</sym> <def>left</def><sym>,</sym> <def>right</def><sym>)):</sym><br />
<def></def>    <kwa>if not</kwa> <def>left</def><sym>:</sym> <def></def><kwa>return</kwa> <def>item</def><br />
    <kwa>return</kwa> <def>item</def> <sym>+</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def>left</def><sym>) -</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def>right</def><sym>)</sym><br />
<def><br />
min_depth</def> <sym>=</sym> <def></def><num>4</num><br />
<def>max_depth</def> <sym>=</sym> <def></def><kwb>max</kwb><def></def><sym>(</sym><def>min_depth</def> <sym>+</sym> <def></def><num>2</num><def></def><sym>,</sym> <def></def><kwb>int</kwb><def></def><sym>(</sym><def>sys</def><sym>.</sym><def>argv</def><sym>[</sym><def></def><num>1</num><def></def><sym>]))</sym><br />
<def>stretch_depth</def> <sym>=</sym> <def>max_depth</def> <sym>+</sym> <def></def><num>1</num><br />
<def></def><br />
<kwa>print</kwa> <def></def><str>&quot;stretch tree of depth %d</str><esc>\t</esc> <str>check:&quot;</str><def></def> <sym>%</sym> <def>stretch_depth</def><sym>,</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def></def><num>0</num><def></def><sym>,</sym> <def>stretch_depth</def><sym>))</sym><br />
<def><br />
long_lived_tree</def> <sym>=</sym> <def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def></def><num>0</num><def></def><sym>,</sym> <def>max_depth</def><sym>)</sym><br />
<def><br />
iterations</def> <sym>=</sym> <def></def><num>2</num><def></def><sym>**</sym><def>max_depth</def><br />
<kwa>for</kwa> <def>depth</def> <kwa>in</kwa> <def></def><kwb>xrange</kwb><def></def><sym>(</sym><def>min_depth</def><sym>,</sym> <def>stretch_depth</def><sym>,</sym> <def></def><num>2</num><def></def><sym>):</sym><br />
<def><br />
    check</def> <sym>=</sym> <def></def><num>0</num><br />
<def></def>    <kwa>for</kwa> <def>i</def> <kwa>in</kwa> <def></def><kwb>xrange</kwb><def></def><sym>(</sym><def></def><num>1</num><def></def><sym>,</sym> <def>iterations</def> <sym>+</sym> <def></def><num>1</num><def></def><sym>):</sym><br />
<def>        check</def> <sym>+=</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def></def><kwd>make_tree</kwd><def></def><sym>(</sym><def>i</def><sym>,</sym> <def>depth</def><sym>)) +</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def></def><kwd>make_tree</kwd><def></def><sym>(-</sym><def>i</def><sym>,</sym> <def>depth</def><sym>))</sym><br />
<def></def><br />
    <kwa>print</kwa> <def></def><str>&quot;%d</str><esc>\t</esc> <str>trees of depth %d</str><esc>\t</esc> <str>check:&quot;</str><def></def> <sym>% (</sym><def>iterations</def> <sym>*</sym> <def></def><num>2</num><def></def><sym>,</sym> <def>depth</def><sym>),</sym> <def>check<br />
    iterations</def> <sym>/=</sym> <def></def><num>4</num><br />
<def></def><br />
<kwa>print</kwa> <def></def><str>&quot;long lived tree of depth %d</str><esc>\t</esc> <str>check:&quot;</str><def></def> <sym>%</sym> <def>max_depth</def><sym>,</sym> <def></def><kwd>check_tree</kwd><def></def><sym>(</sym><def>long_lived_tree</def><sym>)</sym><def></def><br />
</source>
