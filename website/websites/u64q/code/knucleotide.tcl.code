<source>
<def></def><slc>#!/usr/bin/tclsh</slc><br />
<def></def><br />
<slc>#  The Great Computer Language Shootout</slc><br />
<def></def><slc># http://shootout.alioth.debian.org/</slc><br />
<def></def><slc>#</slc><br />
<def></def><slc># contributed by Daniel South</slc><br />
<def></def><br />
<br />
<kwa>proc</kwa> <def>kFrequency</def> <sym>{</sym><def>s k framesize</def><sym>} {</sym><br />
<def></def>   <kwa>global</kwa> <def>freq</def><br />
<br />
   <kwa>set</kwa> <def>n</def> <sym>[</sym><def></def><kwa>string</kwa> <def>length</def> <kwb>$s</kwb><def></def><sym>]</sym><br />
<def></def>   <kwa>incr</kwa> <def>k</def> <kwc>-1</kwc><br />
<def></def>   <kwa>incr</kwa> <def>n</def> <sym>-</sym><def></def><kwb>$k</kwb><br />
<def></def>   <kwa>for</kwa> <def></def><sym>{</sym><def></def><kwa>set</kwa> <def>i</def> <sym>[</sym><def></def><kwa>incr</kwa> <def>framesize</def> <kwc>-1</kwc><def></def><sym>]} {</sym><def></def><kwb>$i</kwb> <def></def><sym>&lt;</sym> <def></def><kwb>$n</kwb><def></def><sym>} {</sym><def></def><kwa>incr</kwa> <def>i</def><sym>} {</sym><br />
<def></def>      <kwa>set</kwa> <def>c</def> <sym>[</sym><def></def><kwa>string</kwa> <def>range</def> <kwb>$s $i</kwb> <def></def><sym>[</sym><def></def><kwa>incr</kwa> <def>i</def> <kwb>$k</kwb><def></def><sym>]]</sym><br />
<def></def>      <kwa>if</kwa> <def></def><sym>{[</sym><def></def><kwa>catch</kwa> <def></def><sym>{</sym><def></def><kwa>incr</kwa> <def>freq</def><sym>(</sym><def></def><kwb>$c</kwb><def></def><sym>)}]} {</sym><def></def><kwa>set</kwa> <def>freq</def><sym>(</sym><def></def><kwb>$c</kwb><def></def><sym>)</sym> <def></def><num>1</num><def></def><sym>}</sym><br />
<def></def>   <sym>}</sym><br />
<def></def><sym>}</sym><br />
<def></def><br />
<br />
<kwa>proc</kwa> <def>frequency</def> <sym>{</sym><def>s k</def><sym>} {</sym><br />
<def></def>   <kwa>array unset</kwa> <def></def><sym>::</sym><def></def><kwd>freq</kwd><br />
<def></def>   <kwa>set</kwa> <def>sum</def> <num>0</num><br />
<def></def><br />
   <kwa>for</kwa> <def></def><sym>{</sym><def></def><kwa>set</kwa> <def>i</def> <num>0</num><def></def><sym>} {</sym><def></def><kwb>$i</kwb> <def></def><sym>&lt;</sym> <def></def><kwb>$k</kwb><def></def><sym>} {} {</sym><def>kFrequency</def> <kwb>$s $k</kwb> <def></def><sym>[</sym><def></def><kwa>incr</kwa> <def>i</def><sym>]}</sym><br />
<def></def>   <kwa>foreach</kwa> <def></def><sym>{</sym><def>fragment count</def><sym>} [</sym><def></def><kwa>array</kwa> <def>get</def> <sym>::</sym><def></def><kwd>freq</kwd><def></def><sym>] {</sym><br />
<def></def>      <kwa>lappend</kwa> <def>sortheap</def> <sym>[</sym><def></def><kwa>list</kwa> <def></def><kwb>$fragment $count</kwb><def></def><sym>]</sym><br />
<def></def>      <kwa>incr</kwa> <def>sum</def> <kwb>$count</kwb><br />
<def></def>   <sym>}</sym><br />
<def></def>   <kwa>foreach</kwa> <def>item</def> <sym>[</sym><def></def><kwa>lsort</kwa> <def></def><kwc>-integer -index</kwc> <def></def><num>1</num> <def></def><kwc>-decreasing</kwc> <def></def><sym>[</sym><def></def><kwa>lsort</kwa> <def></def><kwb>$sortheap</kwb><def></def><sym>]] {</sym><br />
<def></def>      <kwa>set</kwa> <def>percent</def> <sym>[</sym><def></def><kwa>expr</kwa> <def></def><sym>{</sym><def>double</def><sym>([</sym><def></def><kwa>lindex</kwa> <def></def><kwb>$item</kwb> <def></def><num>1</num><def></def><sym>]) /</sym> <def></def><kwb>$sum</kwb> <def></def><sym>*</sym> <def></def><num>100</num><def></def><sym>}]</sym><br />
<def></def>      <kwa>puts</kwa> <def></def><sym>[</sym><def></def><kwa>format</kwa> <def></def><str>&quot;%s %0.3f&quot;</str><def></def> <sym>[</sym><def></def><kwa>lindex</kwa> <def></def><kwb>$item</kwb> <def></def><num>0</num><def></def><sym>]</sym> <def></def><kwb>$percent</kwb><def></def><sym>]</sym><br />
<def></def>   <sym>}</sym><br />
<def></def>   <kwa>puts</kwa> <def></def><str>&quot;&quot;</str><def></def><br />
<sym>}</sym><br />
<def></def><br />
<kwa>proc</kwa> <def>count</def> <sym>{</sym><def>s fragment</def><sym>} {</sym><br />
<def></def>    <kwa>array unset</kwa> <def></def><sym>::</sym><def></def><kwd>freq</kwd><br />
<def></def>    <kwa>set</kwa> <def>count</def> <num>0</num><br />
<def></def><br />
    <kwa>set</kwa> <def>k</def> <sym>[</sym><def></def><kwa>string</kwa> <def>length</def> <kwb>$fragment</kwb><def></def><sym>]</sym><br />
<def></def>    <kwa>for</kwa> <def></def><sym>{</sym><def></def><kwa>set</kwa> <def>i</def> <num>0</num><def></def><sym>} {</sym><def></def><kwb>$i</kwb> <def></def><sym>&lt;</sym> <def></def><kwb>$k</kwb><def></def><sym>} {} {</sym><def>kFrequency</def> <kwb>$s $k</kwb> <def></def><sym>[</sym><def></def><kwa>incr</kwa> <def>i</def><sym>]}</sym><br />
<def></def>    <kwa>if</kwa> <def></def><sym>{[</sym><def></def><kwa>info</kwa> <def>exists</def> <sym>::</sym><def></def><kwd>freq</kwd><def></def><sym>(</sym><def></def><kwb>$fragment</kwb><def></def><sym>)]} {</sym><def></def><kwa>set</kwa> <def>count $</def><sym>::</sym><def></def><kwd>freq</kwd><def></def><sym>(</sym><def></def><kwb>$fragment</kwb><def></def><sym>)}</sym><br />
<def></def>    <kwa>puts</kwa> <def></def><kwb>$count</kwb><def>\t</def><kwb>$fragment</kwb><br />
<def></def><sym>}</sym><br />
<def></def><br />
<kwa>proc</kwa> <def>main</def> <sym>{} {</sym><br />
<def></def>    <kwa>while</kwa> <def></def><sym>{[</sym><def></def><kwa>gets</kwa> <def>stdin line</def><sym>] !=</sym> <def></def><kwc>-1</kwc><def></def><sym>} {</sym><def></def><kwa>if</kwa> <def></def><sym>{[</sym><def></def><kwa>string</kwa> <def>match</def> <str>&quot;&gt;THREE*&quot;</str><def></def> <kwb>$line</kwb><def></def><sym>]}</sym> <def></def><kwa>break</kwa><def></def><sym>}</sym><br />
<def></def>    <kwa>while</kwa> <def></def><sym>{[</sym><def></def><kwa>gets</kwa> <def>stdin line</def><sym>] !=</sym> <def></def><kwc>-1</kwc><def></def><sym>} {</sym><def></def><kwa>append</kwa> <def>sequence</def> <kwb>$line</kwb><def></def><sym>}</sym><br />
<def></def>    <kwa>set</kwa> <def>sequence</def> <sym>[</sym><def></def><kwa>string</kwa> <def>toupper</def> <kwb>$sequence</kwb><def></def><sym>]</sym><br />
<def><br />
    frequency</def> <kwb>$sequence</kwb> <def></def><num>1</num><br />
<def>    frequency</def> <kwb>$sequence</kwb> <def></def><num>2</num><br />
<def><br />
    count</def> <kwb>$sequence</kwb> <def></def><str>&quot;GGT&quot;</str><def><br />
    count</def> <kwb>$sequence</kwb> <def></def><str>&quot;GGTA&quot;</str><def><br />
    count</def> <kwb>$sequence</kwb> <def></def><str>&quot;GGTATT&quot;</str><def><br />
    count</def> <kwb>$sequence</kwb> <def></def><str>&quot;GGTATTTTAATT&quot;</str><def><br />
    count</def> <kwb>$sequence</kwb> <def></def><str>&quot;GGTATTTTAATTTATAGT&quot;</str><def></def><br />
<sym>}</sym><br />
<def><br />
main</def><br />
</source>
