<span class="hl slc"># The Computer Language Shootout</span>
<span class="hl slc"># http://shootout.alioth.debian.org/</span>
<span class="hl slc"># Contributed by Andrew McParland, based on the C# entry</span>

<span class="hl kwa">proc</span> compute <span class="hl sym">{</span>n<span class="hl sym">} {</span>
    <span class="hl kwa">foreach</span> var <span class="hl sym">[</span><span class="hl kwa">list</span> a1 a2 a3 a4 a5 a6 a7 a8 a9<span class="hl sym">] {</span>
        <span class="hl kwa">set</span> <span class="hl kwb">$var</span> <span class="hl num">0.0</span>
    <span class="hl sym">}</span>
    <span class="hl kwa">set</span> alt <span class="hl sym">-</span><span class="hl num">1.0</span>
    <span class="hl kwa">set</span> twothirds <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span><span class="hl num">2.0</span><span class="hl sym">/</span><span class="hl num">3.0</span><span class="hl sym">}]</span>

    <span class="hl kwa">for</span> <span class="hl sym">{</span><span class="hl kwa">set</span> k <span class="hl num">1</span><span class="hl sym">} {</span><span class="hl kwb">$k</span> <span class="hl sym">&lt;=</span> <span class="hl kwb">$n</span><span class="hl sym">} {</span><span class="hl kwa">incr</span> k<span class="hl sym">} {</span>
        <span class="hl kwa">set</span> k2 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> pow<span class="hl sym">(</span><span class="hl kwb">$k</span><span class="hl sym">,</span><span class="hl num">2</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> k3 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$k2</span><span class="hl sym">*</span><span class="hl kwb">$k</span> <span class="hl sym">}]</span>
        <span class="hl kwa">set</span> sk <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> sin<span class="hl sym">(</span><span class="hl kwb">$k</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> ck <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> cos<span class="hl sym">(</span><span class="hl kwb">$k</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> alt <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{ -</span><span class="hl kwb">$alt</span> <span class="hl sym">}]</span>

        <span class="hl kwa">set</span> a1 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a1</span> <span class="hl sym">+</span> pow<span class="hl sym">(</span><span class="hl kwb">$twothirds</span><span class="hl sym">,</span><span class="hl kwb">$k</span><span class="hl sym">-</span><span class="hl num">1.0</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> a2 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a2</span> <span class="hl sym">+</span> pow<span class="hl sym">(</span><span class="hl kwb">$k</span><span class="hl sym">,-</span><span class="hl num">0.5</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> a3 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a3</span> <span class="hl sym">+</span> <span class="hl num">1.0</span><span class="hl sym">/(</span><span class="hl kwb">$k</span><span class="hl sym">*(</span><span class="hl kwb">$k</span><span class="hl sym">+</span><span class="hl num">1.0</span><span class="hl sym">)) }]</span>
        <span class="hl kwa">set</span> a4 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a4</span> <span class="hl sym">+</span> <span class="hl num">1.0</span><span class="hl sym">/(</span><span class="hl kwb">$k3</span> <span class="hl sym">*</span> <span class="hl kwb">$sk</span><span class="hl sym">*</span><span class="hl kwb">$sk</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> a5 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a5</span> <span class="hl sym">+</span> <span class="hl num">1.0</span><span class="hl sym">/(</span><span class="hl kwb">$k3</span> <span class="hl sym">*</span> <span class="hl kwb">$ck</span><span class="hl sym">*</span><span class="hl kwb">$ck</span><span class="hl sym">) }]</span>
        <span class="hl kwa">set</span> a6 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a6</span> <span class="hl sym">+</span> <span class="hl num">1.0</span><span class="hl sym">/</span><span class="hl kwb">$k</span> <span class="hl sym">}]</span>
        <span class="hl kwa">set</span> a7 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a7</span> <span class="hl sym">+</span> <span class="hl num">1.0</span><span class="hl sym">/</span><span class="hl kwb">$k2</span> <span class="hl sym">}]</span>
        <span class="hl kwa">set</span> a8 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a8</span> <span class="hl sym">+</span> <span class="hl kwb">$alt</span><span class="hl sym">/</span><span class="hl kwb">$k</span> <span class="hl sym">}]</span>
        <span class="hl kwa">set</span> a9 <span class="hl sym">[</span><span class="hl kwa">expr</span> <span class="hl sym">{</span> <span class="hl kwb">$a9</span> <span class="hl sym">+</span> <span class="hl kwb">$alt</span><span class="hl sym">/(</span><span class="hl num">2.0</span><span class="hl sym">*</span><span class="hl kwb">$k</span><span class="hl sym">-</span><span class="hl num">1.0</span><span class="hl sym">) }]</span>
    <span class="hl sym">}</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">(2/3)^k&quot;</span> <span class="hl kwb">$a1</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">k^-0.5&quot;</span> <span class="hl kwb">$a2</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">1/k(k+1)&quot;</span> <span class="hl kwb">$a3</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Flint Hills&quot;</span> <span class="hl kwb">$a4</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Cookson Hills&quot;</span> <span class="hl kwb">$a5</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Harmonic&quot;</span> <span class="hl kwb">$a6</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Riemann Zeta&quot;</span> <span class="hl kwb">$a7</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Alternating Harmonic&quot;</span> <span class="hl kwb">$a8</span><span class="hl sym">]</span>
    <span class="hl kwa">puts</span> <span class="hl sym">[</span><span class="hl kwa">format</span> <span class="hl str">&quot;%.9f</span><span class="hl esc">\t</span><span class="hl str">Gregory&quot;</span> <span class="hl kwb">$a9</span><span class="hl sym">]</span>
<span class="hl sym">}</span>

compute <span class="hl sym">[</span><span class="hl kwa">lindex</span> <span class="hl kwb">$argv</span> <span class="hl num">0</span><span class="hl sym">]</span>
