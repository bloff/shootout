<span class="com">&quot;*  The Computer Language Shootout</span>
<span class="com">   http://shootout.alioth.debian.org/</span>
<span class="com">   contributed by Isaac Gouy *&quot;</span><span class="sym">!</span>

<span class="sym">!</span>Tests class methodsFor<span class="sym">:</span> <span class="str">'benchmarking'</span> stamp<span class="sym">:</span> <span class="str">'  11/29/2006 21:23'</span><span class="sym">!</span>partialsums   <span class="sym">|</span> n a1 a2 a3 a4 a5 a6 a7 a8 a9 twothirds alt stdout print <span class="sym">|</span>   n <span class="sym">:= (</span>SmalltalkImage current getSystemAttribute<span class="sym">:</span> <span class="num">3</span><span class="sym">)</span> asInteger<span class="sym">.</span>   a1 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a2 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a3 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a4 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a5 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span>   a6 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a7 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a8 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span> a9 <span class="sym">:=</span> <span class="num">0.0</span>d0<span class="sym">.</span>   twothirds <span class="sym">:=</span> <span class="num">2.0</span>d0<span class="sym">/</span><span class="num">3.0</span>d0<span class="sym">.</span>   alt <span class="sym">:= -</span><span class="num">1.0</span>d0<span class="sym">.</span>   <span class="num">1.0</span>d0 to<span class="sym">:</span> n do<span class="sym">: [:</span>k<span class="sym">| |</span> k2 k3 sk ck <span class="sym">|</span>      k2 <span class="sym">:=</span> k<span class="sym">*</span>k<span class="sym">.</span>      k3 <span class="sym">:=</span> k2<span class="sym">*</span>k<span class="sym">.</span>      sk <span class="sym">:=</span> k sin<span class="sym">.</span>      ck <span class="sym">:=</span> k cos<span class="sym">.</span>      alt <span class="sym">:= -</span><span class="num">1.0</span>d0 <span class="sym">*</span> alt<span class="sym">.</span>      a1 <span class="sym">:=</span> a1 <span class="sym">+ (</span>twothirds raisedTo<span class="sym">:</span> k <span class="sym">-</span> <span class="num">1.0</span>d0<span class="sym">).</span>      a2 <span class="sym">:=</span> a2 <span class="sym">+ (</span>k raisedTo<span class="sym">: -</span><span class="num">0.5</span>d0<span class="sym">).</span>      a3 <span class="sym">:=</span> a3 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k<span class="sym">*(</span>k<span class="sym">+</span><span class="num">1.0</span>d0<span class="sym">))).</span>      a4 <span class="sym">:=</span> a4 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k3<span class="sym">*</span>sk<span class="sym">*</span>sk<span class="sym">)).</span>      a5 <span class="sym">:=</span> a5 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/(</span>k3<span class="sym">*</span>ck<span class="sym">*</span>ck<span class="sym">)).</span>      a6 <span class="sym">:=</span> a6 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/</span>k<span class="sym">).</span>      a7 <span class="sym">:=</span> a7 <span class="sym">+ (</span><span class="num">1.0</span>d0<span class="sym">/</span>k2<span class="sym">).</span>      a8 <span class="sym">:=</span> a8 <span class="sym">+ (</span>alt<span class="sym">/</span>k<span class="sym">).</span>      a9 <span class="sym">:=</span> a9 <span class="sym">+ (</span>alt<span class="sym">/(</span><span class="num">2.0</span>d0<span class="sym">*</span>k <span class="sym">-</span> <span class="num">1.0</span>d0<span class="sym">)).   ].</span>stdout <span class="sym">:=</span> UnixProcess stdOut<span class="sym">.</span>print <span class="sym">:= [:</span>answer <span class="sym">:</span>id <span class="sym">|</span>   stdout       nextPutAll<span class="sym">: (</span>answer printShowingDecimalPlaces<span class="sym">:</span> <span class="num">9</span><span class="sym">);</span>      nextPut<span class="sym">:</span> Character tab<span class="sym">;</span>      nextPutAll<span class="sym">:</span> id<span class="sym">;</span>      nextPut<span class="sym">:</span> Character lf   <span class="sym">].</span>print value<span class="sym">:</span> a1 value<span class="sym">:</span> <span class="str">'(2/3)^k'</span><span class="sym">.</span>print value<span class="sym">:</span> a2 value<span class="sym">:</span> <span class="str">'k^-0.5'</span><span class="sym">.</span>print value<span class="sym">:</span> a3 value<span class="sym">:</span> <span class="str">'1/k(k+1)'</span><span class="sym">.</span>print value<span class="sym">:</span> a4 value<span class="sym">:</span> <span class="str">'Flint Hills'</span><span class="sym">.</span>print value<span class="sym">:</span> a5 value<span class="sym">:</span> <span class="str">'Cookson Hills'</span><span class="sym">.</span>print value<span class="sym">:</span> a6 value<span class="sym">:</span> <span class="str">'Harmonic'</span><span class="sym">.</span>print value<span class="sym">:</span> a7 value<span class="sym">:</span> <span class="str">'Riemann Zeta'</span><span class="sym">.</span>print value<span class="sym">:</span> a8 value<span class="sym">:</span> <span class="str">'Alternating Harmonic'</span><span class="sym">.</span>print value<span class="sym">:</span> a9 value<span class="sym">:</span> <span class="str">'Gregory'</span><span class="sym">.! !</span>


<span class="sym">!</span>Float methodsFor<span class="sym">:</span> <span class="str">'converting'</span> stamp<span class="sym">:</span> <span class="str">'  4/12/2007 09:54'</span><span class="sym">!</span>printShowingDecimalPlaces<span class="sym">:</span> placesDesired	<span class="sym">|</span> aString <span class="sym">|</span>	placesDesired <span class="sym">&lt;=</span> <span class="num">0</span> ifTrue<span class="sym">: [^</span> <span class="kwa">self</span> rounded printString<span class="sym">].</span>	aString _ <span class="sym">((</span><span class="kwa">self</span> asFloat roundTo<span class="sym">:</span>
           <span class="sym">(</span>Utilities floatPrecisionForDecimalPlaces<span class="sym">:</span> placesDesired<span class="sym">))</span> asString<span class="sym">),</span>
              <span class="sym">((</span>String new<span class="sym">:</span> placesDesired<span class="sym">)</span> atAllPut<span class="sym">: $</span><span class="num">0</span><span class="sym">).	^</span> aString copyFrom<span class="sym">:</span> <span class="num">1</span> to<span class="sym">: ((</span>aString indexOf<span class="sym">: $.) +</span> placesDesired<span class="sym">) ! !</span>
