<span class="slc">%%% $Id: sumcol-oz.code,v 1.2 2006-07-11 15:29:21 igouy-guest Exp $</span>
<span class="slc">%%% http://dada.perl.it/shootout/</span>
<span class="kwa">functor</span>
<span class="kwa">import</span>
    System<span class="sym">(</span>printInfo<span class="sym">)</span>
    Application<span class="sym">(</span>exit<span class="sym">)</span>
    Open<span class="sym">(</span>text file<span class="sym">)</span>
    OS
<span class="kwa">define</span>
<span class="kwa">class</span> TextFile
  <span class="kwa">from</span> Open<span class="sym">.</span>file Open<span class="sym">.</span>text
<span class="kwa">end</span>

<span class="kwa">fun</span> <span class="sym">{</span>SumLines FILE SUM<span class="sym">}</span>
    <span class="kwa">case</span> <span class="sym">{</span>FILE getS<span class="sym">($)}</span> <span class="kwa">of false then</span>
        SUM
    elseof LINE <span class="kwa">then</span>
        <span class="sym">{</span>SumLines FILE SUM<span class="sym">+{</span>String<span class="sym">.</span>toInt LINE<span class="sym">}}</span>
    <span class="kwa">end</span>
<span class="kwa">end</span>

<span class="kwa">in</span>
    <span class="kwa">local</span> STDIN SUM <span class="kwa">in</span>
        STDIN <span class="sym">= {</span>New TextFile init<span class="sym">(</span>name<span class="sym">:</span>stdin<span class="sym">)}</span>
        SUM <span class="sym">= {</span>SumLines STDIN <span class="num">0</span><span class="sym">}</span>
        <span class="sym">{</span>System<span class="sym">.</span>printInfo SUM<span class="sym">}</span>
        <span class="sym">{</span>System<span class="sym">.</span>printInfo &quot;<span class="sym">\</span>n&quot;<span class="sym">}</span>
    <span class="kwa">end</span>
    <span class="sym">{</span>Application<span class="sym">.</span>exit <span class="num">0</span><span class="sym">}</span>
<span class="kwa">end</span>
