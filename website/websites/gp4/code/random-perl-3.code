<span class="slc">#!/usr/bin/env perl</span>
<span class="slc"># $$Id: random-perl-3.code,v 1.1 2006-01-18 16:36:46 igouy-guest Exp $</span>
<span class="slc">#  The Computer Language Shootout</span>
<span class="slc">#    http://shootout.alioth.debian.org/</span>
<span class="slc"># BENCHMARK: random</span>
<span class="slc">#   contributed by Karl FORNER</span>
<span class="kwa">use</span> Inline <span class="str">'C'</span><span class="sym">;</span>
printf <span class="str">&quot;%.9f</span><span class="esc">\n</span><span class="str">&quot;</span><span class="sym">,</span> <span class="kwd">gen_random</span><span class="sym">(</span><span class="kwb">$ARGV</span><span class="sym">[</span><span class="num">0</span><span class="sym">] ||</span> <span class="num">1</span><span class="sym">,</span><span class="num">100.0</span><span class="sym">);</span>
__END__
__C__
<span class="slc">#define IM 139968</span>
<span class="slc">#define IA 3877</span>
<span class="slc">#define IC 29573</span>
double <span class="kwd">gen_random</span><span class="sym">(</span>int n<span class="sym">,</span>double max<span class="sym">) {</span>
    static long <span class="kwa">last</span> <span class="sym">=</span> <span class="num">42</span><span class="sym">;</span>
    <span class="kwa">while</span> <span class="sym">(</span>n<span class="sym">--)</span>
      <span class="kwa">last</span> <span class="sym">= (</span><span class="kwa">last</span> <span class="sym">*</span> IA <span class="sym">+</span> IC<span class="sym">)</span> % IM<span class="sym">;</span>
    <span class="kwa">return</span><span class="sym">(</span> max <span class="sym">*</span> <span class="kwa">last</span> <span class="sym">/</span> IM <span class="sym">);</span>
<span class="sym">}</span>

